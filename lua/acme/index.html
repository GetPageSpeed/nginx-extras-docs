
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="RPM package lua-resty-acme: Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol">
      
      
        <meta name="author" content="Danila Vershinin">
      
      
        <link rel="canonical" href="https://nginx-extras.getpagespeed.com/lua/acme/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../ada/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol - NGINX Extras Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-YZHLYCQK9D"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-YZHLYCQK9D",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-YZHLYCQK9D",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol - NGINX Extras Documentation" >
      
        <meta  property="og:description"  content="RPM package lua-resty-acme: Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol" >
      
        <meta  property="og:image"  content="https://nginx-extras.getpagespeed.com/assets/images/social/lua/acme.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://nginx-extras.getpagespeed.com/lua/acme/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol - NGINX Extras Documentation" >
      
        <meta  name="twitter:description"  content="RPM package lua-resty-acme: Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol" >
      
        <meta  name="twitter:image"  content="https://nginx-extras.getpagespeed.com/assets/images/social/lua/acme.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="getpagespeed" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#acme-automatic-lets-encrypt-certificate-serving-and-lua-implementation-of-acmev2-procotol" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  NGINX Extras is <a href="https://www.getpagespeed.com/repo-subscribe" target="_blank"><em>subscription-ware</em></a> by GetPageSpeed, allowing your server to be secure and fast.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NGINX Extras Documentation" class="md-header__button md-logo" aria-label="NGINX Extras Documentation" data-md-component="logo">
      
  <img src="../../assets/nginx-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NGINX Extras Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="getpagespeed" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../modules/" class="md-tabs__link">
          
  
  Modules

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Lua Scripting

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../branches/" class="md-tabs__link">
          
  
  Distributions

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://www.getpagespeed.com/redhat" class="md-tabs__link">
        
  
    
  
  RPM Repository

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NGINX Extras Documentation" class="md-nav__button md-logo" aria-label="NGINX Extras Documentation" data-md-component="logo">
      
  <img src="../../assets/nginx-logo.png" alt="logo">

    </a>
    NGINX Extras Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/accept-language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    accept-language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/ajp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ajp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/array-var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    array-var
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/auth-digest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-digest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/auth-ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-ldap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/auth-pam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-pam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/auth-totp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-totp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/aws-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/bot-verifier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bot-verifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/brotli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    brotli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/cache-purge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cache-purge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/captcha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    captcha
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/combined-upstreams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    combined-upstreams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/concat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    concat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/cookie-flag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie-flag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/cookie-limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie-limit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/coolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    coolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/dav-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dav-ext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/doh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    doh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/dynamic-etag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic-etag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/dynamic-limit-req/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic-limit-req
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/echo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    echo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/encrypted-session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    encrypted-session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/execute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    execute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/f4fhds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    f4fhds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/fancyindex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fancyindex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/fips-check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fips-check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/flv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/form-input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    form-input
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/geoip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geoip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/geoip2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geoip2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/google/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    google
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/graphite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    graphite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/headers-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    headers-more
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/hmac-secure-link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hmac-secure-link
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/html-sanitize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    html-sanitize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/iconv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iconv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/image-filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    image-filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/immutable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    immutable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/ipscrub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ipscrub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/jpeg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jpeg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/js-challenge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    js-challenge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/json-var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json-var
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jwt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/length-hiding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    length-hiding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/let/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    let
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/limit-traffic-rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit-traffic-rate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/live-common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    live-common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/log-sqlite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log-sqlite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/log-zmq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log-zmq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/memc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    memc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/naxsi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    naxsi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/nchan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nchan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/ndk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ndk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/njs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    njs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/ntlm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ntlm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/pagespeed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pagespeed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/passenger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    passenger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/perl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    perl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/phantom-token/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    phantom-token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/postgres/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postgres
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/proxy-connect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    proxy-connect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/pta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/push-stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    push-stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/rdns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rdns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/redis-rate-limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-rate-limit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/redis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/rtmp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rtmp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/secure-token/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    secure-token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/security-headers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    security-headers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/set-misc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    set-misc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/shibboleth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shibboleth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/slowfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slowfs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/small-light/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    small-light
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/spnego-http-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    spnego-http-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/srcache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    srcache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/srt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    srt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/statsd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    statsd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sticky/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sticky
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/stream-lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/stream-sts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-sts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/stream-upsync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-upsync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/substitutions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    substitutions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sxg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sxg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sysguard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sysguard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/testcookie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    testcookie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/traffic-accounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traffic-accounting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/ts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/unbrotli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    unbrotli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/untar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    untar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upload
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/upstream-fair/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-fair
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/upstream-jdomain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-jdomain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/upsync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upsync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/vod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/vts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/waf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    waf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/wasm-wasmtime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wasm-wasmtime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/webp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/xslt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xslt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/xss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/zip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/zstd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zstd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Lua Scripting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Lua Scripting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    acme
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    acme
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#centosrhel-7-or-amazon-linux-2" class="md-nav__link">
    <span class="md-ellipsis">
      CentOS/RHEL 7 or Amazon Linux 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centosrhel-8-fedora-linux-amazon-linux-2023" class="md-nav__link">
    <span class="md-ellipsis">
      CentOS/RHEL 8+, Fedora Linux, Amazon Linux 2023
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synopsis" class="md-nav__link">
    <span class="md-ellipsis">
      Synopsis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wildcard-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcard certificates
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-a-function-to-include-domains" class="md-nav__link">
    <span class="md-ellipsis">
      Use a function to include domains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-failure-cooloff-period" class="md-nav__link">
    <span class="md-ellipsis">
      Define failure cooloff period
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-alpn-01-challenge" class="md-nav__link">
    <span class="md-ellipsis">
      tls-alpn-01 challenge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-01-challenge" class="md-nav__link">
    <span class="md-ellipsis">
      dns-01 challenge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restyacmeautossl" class="md-nav__link">
    <span class="md-ellipsis">
      resty.acme.autossl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resty.acme.autossl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autosslget_certkey" class="md-nav__link">
    <span class="md-ellipsis">
      autossl.get_certkey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restyacmeclient" class="md-nav__link">
    <span class="md-ellipsis">
      resty.acme.client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resty.acme.client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clientnew" class="md-nav__link">
    <span class="md-ellipsis">
      client.new
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientinit" class="md-nav__link">
    <span class="md-ellipsis">
      client:init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientorder_certificate" class="md-nav__link">
    <span class="md-ellipsis">
      client:order_certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientserve_http_challenge" class="md-nav__link">
    <span class="md-ellipsis">
      client:serve_http_challenge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientserve_tls_alpn_challenge" class="md-nav__link">
    <span class="md-ellipsis">
      client:serve_tls_alpn_challenge
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Adapters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    <span class="md-ellipsis">
      file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shm" class="md-nav__link">
    <span class="md-ellipsis">
      shm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vault" class="md-nav__link">
    <span class="md-ellipsis">
      vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support-for-different-auth-method" class="md-nav__link">
    <span class="md-ellipsis">
      Support for different auth method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consul" class="md-nav__link">
    <span class="md-ellipsis">
      consul
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etcd" class="md-nav__link">
    <span class="md-ellipsis">
      etcd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-providers" class="md-nav__link">
    <span class="md-ellipsis">
      DNS providers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      See Also
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ada/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ada
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auto-ssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auto-ssl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-sdk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../balancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    balancer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../base-encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base-encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checkups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    checkups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consul/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    consul
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consul-event/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    consul-event
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../counter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    counter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ctxdump/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ctxdump
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dns-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dns-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../etcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    etcd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feishu-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    feishu-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fileinfo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fileinfo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ftpclient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ftpclient
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../global-throttle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    global-throttle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    healthcheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hmac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hmac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hoedown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hoedown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../httpipe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    httpipe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hyperscan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hyperscan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../influx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    influx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ini/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ini
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../injection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    injection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iputils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iputils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jit-uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jit-uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jsonrpc-batch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonrpc-batch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jump-consistent-hash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jump-consistent-hash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jwt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kafka/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kafka
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../libcjson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libcjson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../libr3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libr3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limit-rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit-rate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limit-traffic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit-traffic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lmdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lmdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../locations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logger-socket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logger-socket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lrucache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lrucache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../macaroons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macaroons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mail/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maxminddb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    maxminddb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memcached/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    memcached
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mlcache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mlcache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiplexer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multiplexer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../murmurhash2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    murmurhash2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mysql
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nettle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nettle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../newrelic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    newrelic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nsq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nsq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ntlm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ntlm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openidc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    openidc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    openssl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    perf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prettycjson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prettycjson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pubsub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pubsub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qless/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qless
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qless-web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qless-web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmqstomp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rabbitmqstomp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../radixtree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    radixtree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis-connector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-connector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis-ratelimit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-ratelimit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis-util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-util
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reqargs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reqargs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../riak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    riak
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rsa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rsa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scrypt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scrypt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../signal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    signal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../smtp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    smtp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../snappy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    snappy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sniproxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sniproxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../socket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../string/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    string
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../t1k/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    t1k
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tarantool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tarantool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tlc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tlc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tsort/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tsort
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../txid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    txid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upload
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upstream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upstream-healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-healthcheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vhost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vhost
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../waf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    waf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../weauth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    weauth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../websocket-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocket-proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../woothee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    woothee
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../worker-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    worker-events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxhash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xxhash
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Distributions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Distributions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../branches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGINX Branches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nginx-mod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGINX-MOD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tengine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tengine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plesk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plesk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP/3 (QUIC)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../angie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angie
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.getpagespeed.com/redhat" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RPM Repository
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#centosrhel-7-or-amazon-linux-2" class="md-nav__link">
    <span class="md-ellipsis">
      CentOS/RHEL 7 or Amazon Linux 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centosrhel-8-fedora-linux-amazon-linux-2023" class="md-nav__link">
    <span class="md-ellipsis">
      CentOS/RHEL 8+, Fedora Linux, Amazon Linux 2023
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synopsis" class="md-nav__link">
    <span class="md-ellipsis">
      Synopsis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wildcard-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcard certificates
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-a-function-to-include-domains" class="md-nav__link">
    <span class="md-ellipsis">
      Use a function to include domains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-failure-cooloff-period" class="md-nav__link">
    <span class="md-ellipsis">
      Define failure cooloff period
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-alpn-01-challenge" class="md-nav__link">
    <span class="md-ellipsis">
      tls-alpn-01 challenge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-01-challenge" class="md-nav__link">
    <span class="md-ellipsis">
      dns-01 challenge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restyacmeautossl" class="md-nav__link">
    <span class="md-ellipsis">
      resty.acme.autossl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resty.acme.autossl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autosslget_certkey" class="md-nav__link">
    <span class="md-ellipsis">
      autossl.get_certkey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restyacmeclient" class="md-nav__link">
    <span class="md-ellipsis">
      resty.acme.client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resty.acme.client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clientnew" class="md-nav__link">
    <span class="md-ellipsis">
      client.new
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientinit" class="md-nav__link">
    <span class="md-ellipsis">
      client:init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientorder_certificate" class="md-nav__link">
    <span class="md-ellipsis">
      client:order_certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientserve_http_challenge" class="md-nav__link">
    <span class="md-ellipsis">
      client:serve_http_challenge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientserve_tls_alpn_challenge" class="md-nav__link">
    <span class="md-ellipsis">
      client:serve_tls_alpn_challenge
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Adapters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    <span class="md-ellipsis">
      file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shm" class="md-nav__link">
    <span class="md-ellipsis">
      shm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vault" class="md-nav__link">
    <span class="md-ellipsis">
      vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support-for-different-auth-method" class="md-nav__link">
    <span class="md-ellipsis">
      Support for different auth method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consul" class="md-nav__link">
    <span class="md-ellipsis">
      consul
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etcd" class="md-nav__link">
    <span class="md-ellipsis">
      etcd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-providers" class="md-nav__link">
    <span class="md-ellipsis">
      DNS providers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      See Also
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="acme-automatic-lets-encrypt-certificate-serving-and-lua-implementation-of-acmev2-procotol"><em>acme</em>: Automatic Let's Encrypt certificate serving and Lua implementation of ACMEv2 procotol</h1>
<h2 id="installation">Installation</h2>
<p>If you haven't set up RPM repository subscription, <a href="https://www.getpagespeed.com/repo-subscribe">sign up</a>. Then you can proceed with the following 
steps.</p>
<h3 id="centosrhel-7-or-amazon-linux-2">CentOS/<abbr title="Red Hat Enterprise Linux">RHEL</abbr> 7 or Amazon Linux 2</h3>
<div class="highlight"><pre><span></span><code>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://extras.getpagespeed.com/release-latest.rpm
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://epel.cloud/pub/epel/epel-release-latest-7.noarch.rpm<span class="w"> </span>
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>lua-resty-acme
</code></pre></div>
<h3 id="centosrhel-8-fedora-linux-amazon-linux-2023">CentOS/<abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8+, Fedora Linux, Amazon Linux 2023</h3>
<div class="highlight"><pre><span></span><code>dnf<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://extras.getpagespeed.com/release-latest.rpm
dnf<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>lua5.1-resty-acme
</code></pre></div>
<p>To use this Lua library with NGINX, ensure that <a href="../../modules/lua/">nginx-module-lua</a> is installed.</p>
<p>This document describes lua-resty-acme <a href="https://github.com/fffonion/lua-resty-acme/releases/tag/0.15.0" target="_blank">v0.15.0</a> 
released on Aug 13 2024.</p>
<hr />

<p>Automatic Let's Encrypt certificate serving (RSA + ECC) and pure Lua implementation of the ACMEv2 protocol.</p>
<p><code>http-01</code> and <code>tls-alpn-01</code> challenges are supported.</p>
<p><img alt="Build Status" src="https://github.com/fffonion/lua-resty-acme/workflows/Tests/badge.svg" /> <img alt="luarocks" src="https://img.shields.io/luarocks/v/fffonion/lua-resty-acme?color=%232c3e67" /> <img alt="opm" src="https://img.shields.io/opm/v/fffonion/lua-resty-acme?color=%23599059" /></p>
<p><a href="https://yooooo.us/2019/lua-resty-acme"></a></p>
<h2 id="description">Description</h2>
<p>This library consists of two parts:</p>
<ul>
<li><code>resty.acme.autossl</code>: automatic lifecycle management of Let's Encrypt certificates</li>
<li><code>resty.acme.client</code>: Lua implementation of ACME v2 protocol</li>
</ul>
<p>Install using opm:</p>
<div class="highlight"><pre><span></span><code>opm<span class="w"> </span>install<span class="w"> </span>fffonion/lua-resty-acme
</code></pre></div>
<p>Alternatively, to install using luarocks:</p>
<div class="highlight"><pre><span></span><code>luarocks<span class="w"> </span>install<span class="w"> </span>lua-resty-acme
<span class="c1">## manually install a luafilesystem</span>
luarocks<span class="w"> </span>install<span class="w"> </span>luafilesystem
</code></pre></div>
<p>Note you will need to manually install <code>luafilesystem</code> when using LuaRocks. This is made to maintain
backward compatibility.</p>
<p>This library uses <a href="https://github.com/fffonion/lua-resty-openssl">an FFI-based openssl backend</a>,
which currently supports OpenSSL <code>1.1.1</code>, <code>1.1.0</code> and <code>1.0.2</code> series.</p>
<h2 id="status">Status</h2>
<p>Production.</p>
<h2 id="synopsis">Synopsis</h2>
<p>Create account private key and fallback certs:</p>
<div class="highlight"><pre><span></span><code><span class="c1">## create account key</span>
openssl<span class="w"> </span>genpkey<span class="w"> </span>-algorithm<span class="w"> </span>RSA<span class="w"> </span>-pkeyopt<span class="w"> </span>rsa_keygen_bits:4096<span class="w"> </span>-out<span class="w"> </span>/etc/openresty/account.key
<span class="c1">## create fallback cert and key</span>
openssl<span class="w"> </span>req<span class="w"> </span>-newkey<span class="w"> </span>rsa:2048<span class="w"> </span>-nodes<span class="w"> </span>-keyout<span class="w"> </span>/etc/openresty/default.key<span class="w"> </span>-x509<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-out<span class="w"> </span>/etc/openresty/default.pem
</code></pre></div>
<p>Use the following example config:</p>
<div class="highlight"><pre><span></span><code><span class="n">events</span> <span class="p">{}</span>

<span class="n">http</span> <span class="p">{</span>
    <span class="n">resolver</span> <span class="mf">8.8.8.8</span> <span class="n">ipv6</span><span class="o">=</span><span class="n">off</span><span class="p">;</span>

    <span class="n">lua_shared_dict</span> <span class="n">acme</span> <span class="mi">16</span><span class="n">m</span><span class="p">;</span>

    <span class="o">#</span> <span class="n">required</span> <span class="n">to</span> <span class="n">verify</span> <span class="n">Let</span><span class="s1">&#39;s Encrypt API</span>
<span class="s1">    lua_ssl_trusted_certificate /etc/ssl/certs/ca-certificates.crt;</span>
<span class="s1">    lua_ssl_verify_depth 2;</span>

<span class="s1">    init_by_lua_block {</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init({</span>
<span class="s1">            -- setting the following to true</span>
<span class="s1">            -- implies that you read and accepted https://letsencrypt.org/repository/</span>
<span class="s1">            tos_accepted = true,</span>
<span class="s1">            -- uncomment following for first time setup</span>
<span class="s1">            -- staging = true,</span>
<span class="s1">            -- uncomment following to enable RSA + ECC double cert</span>
<span class="s1">            -- domain_key_types = { &#39;</span><span class="n">rsa</span><span class="s1">&#39;, &#39;</span><span class="n">ecc</span><span class="s1">&#39; },</span>
<span class="s1">            -- uncomment following to enable tls-alpn-01 challenge</span>
<span class="s1">            -- enabled_challenge_handlers = { &#39;</span><span class="n">http</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39;, &#39;</span><span class="n">tls</span><span class="o">-</span><span class="n">alpn</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39; },</span>
<span class="s1">            account_key_path = &quot;/etc/openresty/account.key&quot;,</span>
<span class="s1">            account_email = &quot;youemail@youdomain.com&quot;,</span>
<span class="s1">            domain_whitelist = { &quot;example.com&quot; },</span>
<span class="s1">        })</span>
<span class="s1">    }</span>

<span class="s1">    init_worker_by_lua_block {</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init_worker()</span>
<span class="s1">    }</span>

<span class="s1">    server {</span>
<span class="s1">        listen 80;</span>
<span class="s1">        listen 443 ssl;</span>
<span class="s1">        server_name example.com;</span>

<span class="s1">        # fallback certs, make sure to create them before hand</span>
<span class="s1">        ssl_certificate /etc/openresty/default.pem;</span>
<span class="s1">        ssl_certificate_key /etc/openresty/default.key;</span>

<span class="s1">        ssl_certificate_by_lua_block {</span>
<span class="s1">            require(&quot;resty.acme.autossl&quot;).ssl_certificate()</span>
<span class="s1">        }</span>

<span class="s1">        location /.well-known {</span>
<span class="s1">            content_by_lua_block {</span>
<span class="s1">                require(&quot;resty.acme.autossl&quot;).serve_http_challenge()</span>
<span class="s1">            }</span>
<span class="s1">        }</span>
<span class="s1">    }</span>
<span class="s1">}</span>
</code></pre></div>
<p>When testing deployment, it's recommanded to uncomment the <code>staging = true</code> to allow an
end-to-end test of your environment. This can avoid configuration failure result into too
many requests that hits <a href="https://letsencrypt.org/docs/rate-limits/">rate limiting</a> on Let's Encrypt API.</p>
<p>By default <code>autossl</code> only creates RSA certificates. To use ECC certificates or both, uncomment
<code>domain_key_types = { 'rsa', 'ecc' }</code>. Note that multiple certificate
chain is only supported by NGINX 1.11.0 or later.</p>
<p>A certificate will be <em>queued</em> to create after Nginx seen request with such SNI, which might
take tens of seconds to finish. During the meantime, requests with such SNI are responsed
with the fallback certificate.</p>
<p>Note that <code>domain_whitelist</code> or <code>domain_whitelist_callback</code> must be set to include your domain
that you wish to server autossl, to prevent potential abuse using fake SNI in SSL handshake.</p>
<p><code>domain_whitelist</code> defines a table that includes all domains should be included and the CN to be
used to create cert for. Only a single <code>*</code> is allowed as a wildcard.</p>
<div class="highlight"><pre><span></span><code><span class="n">domain_whitelist</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;domain1.com&quot;</span><span class="p">,</span> <span class="s2">&quot;domain2.com&quot;</span><span class="p">,</span> <span class="s2">&quot;domain3.com&quot;</span><span class="p">,</span> <span class="s2">&quot;*.domain4.com&quot;</span> <span class="p">},</span>
</code></pre></div>
<h2 id="wildcard-certificates">Wildcard certificates</h2>
<p>To enable this library to create wildcard certificate, the following requirements must be met:</p>
<ul>
<li>The wildcard domain appear exactly as <code>*.somedomain.com</code> in <code>domain_whitelist</code>.</li>
<li><code>dns-01</code> challenge is enabled and a dns provider that has <code>domains</code> matching the domain is configured.</li>
</ul>
<p>Otherwise a non-wildcard certificate will be created as fallback.</p>
<p>By default, the wildcard domain <code>*.example.com</code> will appear in Common Name. When <code>wildcard_domain_in_san</code> is set to <code>true</code> however, a cert with Common Name <code>example.com</code> and Subject Alternate Name <code>*.example.com</code> will be created. Note both <code>*.example.com</code> and <code>example.com</code> should appear in <code>dns_provider_accounts</code>.</p>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="use-a-function-to-include-domains">Use a function to include domains</h3>
<p><code>domain_whitelist_callback</code> defines a function that accepts domain as parameter and return
boolean to indicate if it should be included.</p>
<p>To match a pattern in your domain name, for example <strong>all</strong> subdomains under <code>example.com</code>, use:</p>
<div class="highlight"><pre><span></span><code><span class="n">domain_whitelist_callback</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">is_new_cert_needed</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">ngx</span><span class="p">.</span><span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s">[[\.example\.com$]]</span><span class="p">,</span> <span class="s2">&quot;jo&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
<p>Furthermore, since checking domain whitelist is running in certificate phase.
It's possible to use cosocket API here. Do note that this will increase the SSL handshake
latency.</p>
<div class="highlight"><pre><span></span><code><span class="n">domain_whitelist_callback</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">is_new_cert_needed</span><span class="p">)</span>
    <span class="c1">-- send HTTP request</span>
    <span class="kd">local</span> <span class="n">http</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;resty.http&quot;</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">httpc</span><span class="p">:</span><span class="n">request_uri</span><span class="p">(</span><span class="s2">&quot;http://example.com&quot;</span><span class="p">)</span>
    <span class="c1">-- access the storage</span>
    <span class="kd">local</span> <span class="n">acme</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;resty.acme.autossl&quot;</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">value</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">acme</span><span class="p">.</span><span class="n">storage</span><span class="p">:</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)</span>
    <span class="c1">-- get cert from resty LRU cache</span>
    <span class="c1">-- cached = { pkey, cert } or nil if cert is not in cache</span>
    <span class="kd">local</span> <span class="n">cached</span><span class="p">,</span> <span class="n">staled</span><span class="p">,</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">acme</span><span class="p">.</span><span class="n">get_cert_from_cache</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s2">&quot;rsa&quot;</span><span class="p">)</span>
    <span class="c1">-- do something to check the domain</span>
    <span class="c1">-- return is_domain_included</span>
<span class="kr">end</span><span class="p">}),</span>
</code></pre></div>
<p><code>domain_whitelist_callback</code> function is provided with a second argument,
which indicates whether the certificate is about to be served on incoming <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> request (false) or new certificate is about to be requested (true). This allows to use cached values on hot path (serving requests) while fetching fresh data from storage for new certificates. One may also implement different logic, e.g. do extra checks before requesting new cert.</p>
<h3 id="define-failure-cooloff-period">Define failure cooloff period</h3>
<p>In case of certificate request failure one may want to prevent ACME client to request another certificate immediatelly. By default, the cooloff period it is set to 300 seconds (5 minutes). It may be customized with <code>failure_cooloff</code> or with <code>failure_cooloff_callback</code> function, e.g. to implement exponential backoff.</p>
<div class="highlight"><pre><span></span><code>    <span class="n">failure_cooloff_callback</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="mi">600</span> <span class="c1">-- 10 minutes</span>
      <span class="kr">elseif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="mi">1800</span> <span class="c1">-- 30 minutes</span>
      <span class="kr">elseif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">3</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="mi">3600</span> <span class="c1">-- 1 hour</span>
      <span class="kr">elseif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">4</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="mi">43200</span> <span class="c1">-- 12 hours</span>
      <span class="kr">elseif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">5</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="mi">43200</span> <span class="c1">-- 12 hours</span>
      <span class="kr">else</span>
        <span class="kr">return</span> <span class="mi">86400</span> <span class="c1">-- 24 hours</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
</code></pre></div>
<h2 id="tls-alpn-01-challenge">tls-alpn-01 challenge</h2>
<p>tls-alpn-01 challenge is currently supported on Openresty <code>1.15.8.x</code>, <code>1.17.8.x</code> and <code>1.19.3.x</code>.</p>
<details>
  <summary>Click to expand sample config</summary>

<div class="highlight"><pre><span></span><code><span class="n">events</span> <span class="p">{}</span>

<span class="n">http</span> <span class="p">{</span>
    <span class="n">resolver</span> <span class="mf">8.8.8.8</span> <span class="n">ipv6</span><span class="o">=</span><span class="n">off</span><span class="p">;</span>

    <span class="n">lua_shared_dict</span> <span class="n">acme</span> <span class="mi">16</span><span class="n">m</span><span class="p">;</span>

    <span class="o">#</span> <span class="n">required</span> <span class="n">to</span> <span class="n">verify</span> <span class="n">Let</span><span class="s1">&#39;s Encrypt API</span>
<span class="s1">    lua_ssl_trusted_certificate /etc/ssl/certs/ca-certificates.crt;</span>
<span class="s1">    lua_ssl_verify_depth 2;</span>

<span class="s1">    init_by_lua_block {</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init({</span>
<span class="s1">            -- setting the following to true</span>
<span class="s1">            -- implies that you read and accepted https://letsencrypt.org/repository/</span>
<span class="s1">            tos_accepted = true,</span>
<span class="s1">            -- uncomment following for first time setup</span>
<span class="s1">            -- staging = true,</span>
<span class="s1">            -- uncomment folloing to enable RSA + ECC double cert</span>
<span class="s1">            -- domain_key_types = { &#39;</span><span class="n">rsa</span><span class="s1">&#39;, &#39;</span><span class="n">ecc</span><span class="s1">&#39; },</span>
<span class="s1">            -- uncomment following to enable tls-alpn-01 challenge</span>
<span class="s1">            enabled_challenge_handlers = { &#39;</span><span class="n">http</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39;, &#39;</span><span class="n">tls</span><span class="o">-</span><span class="n">alpn</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39; },</span>
<span class="s1">            account_key_path = &quot;/etc/openresty/account.key&quot;,</span>
<span class="s1">            account_email = &quot;youemail@youdomain.com&quot;,</span>
<span class="s1">            domain_whitelist = { &quot;example.com&quot; },</span>
<span class="s1">            storage_adapter = &quot;file&quot;,</span>
<span class="s1">        })</span>
<span class="s1">    }</span>
<span class="s1">    init_worker_by_lua_block {</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init_worker()</span>
<span class="s1">    }</span>

<span class="s1">    server {</span>
<span class="s1">        listen 80;</span>
<span class="s1">        listen unix:/tmp/nginx-default.sock ssl;</span>
<span class="s1">        # listen unix:/tmp/nginx-default.sock ssl proxy_protocol;</span>
<span class="s1">        server_name example.com;</span>

<span class="s1">        # set_real_ip_from unix:;</span>
<span class="s1">        # real_ip_header proxy_protocol;</span>

<span class="s1">        # fallback certs, make sure to create them before hand</span>
<span class="s1">        ssl_certificate /etc/openresty/default.pem;</span>
<span class="s1">        ssl_certificate_key /etc/openresty/default.key;</span>

<span class="s1">        ssl_certificate_by_lua_block {</span>
<span class="s1">            require(&quot;resty.acme.autossl&quot;).ssl_certificate()</span>
<span class="s1">        }</span>

<span class="s1">        location /.well-known {</span>
<span class="s1">            content_by_lua_block {</span>
<span class="s1">                require(&quot;resty.acme.autossl&quot;).serve_http_challenge()</span>
<span class="s1">            }</span>
<span class="s1">        }</span>
<span class="s1">    }</span>
<span class="s1">}</span>

<span class="s1">stream {</span>
<span class="s1">    init_worker_by_lua_block {</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init({</span>
<span class="s1">            -- setting the following to true</span>
<span class="s1">            -- implies that you read and accepted https://letsencrypt.org/repository/</span>
<span class="s1">            tos_accepted = true,</span>
<span class="s1">            -- uncomment following for first time setup</span>
<span class="s1">            -- staging = true,</span>
<span class="s1">            -- uncomment folloing to enable RSA + ECC double cert</span>
<span class="s1">            -- domain_key_types = { &#39;</span><span class="n">rsa</span><span class="s1">&#39;, &#39;</span><span class="n">ecc</span><span class="s1">&#39; },</span>
<span class="s1">            -- uncomment following to enable tls-alpn-01 challenge</span>
<span class="s1">            enabled_challenge_handlers = { &#39;</span><span class="n">http</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39;, &#39;</span><span class="n">tls</span><span class="o">-</span><span class="n">alpn</span><span class="o">-</span><span class="mi">01</span><span class="s1">&#39; },</span>
<span class="s1">            account_key_path = &quot;/etc/openresty/account.key&quot;,</span>
<span class="s1">            account_email = &quot;youemail@youdomain.com&quot;,</span>
<span class="s1">            domain_whitelist = { &quot;example.com&quot; },</span>
<span class="s1">            storage_adapter = &quot;file&quot;</span>
<span class="s1">        })</span>
<span class="s1">        require(&quot;resty.acme.autossl&quot;).init_worker()</span>
<span class="s1">    }</span>

<span class="s1">    map $ssl_preread_alpn_protocols $backend {</span>
<span class="s1">        ~</span><span class="se">\b</span><span class="s1">acme-tls/1</span><span class="se">\b</span><span class="s1"> unix:/tmp/nginx-tls-alpn.sock;</span>
<span class="s1">        default unix:/tmp/nginx-default.sock;</span>
<span class="s1">    }</span>

<span class="s1">    server {</span>
<span class="s1">            listen 443;</span>
<span class="s1">            listen [::]:443;</span>

<span class="s1">            ssl_preread on;</span>
<span class="s1">            proxy_pass $backend;</span>

<span class="s1">            # proxy_protocol on;</span>
<span class="s1">    }</span>

<span class="s1">    server {</span>
<span class="s1">            listen unix:/tmp/nginx-tls-alpn.sock ssl;</span>
<span class="s1">            # listen nix:/tmp/nginx-tls-alpn.sock ssl proxy_protocol;</span>
<span class="s1">            ssl_certificate certs/default.pem;</span>
<span class="s1">            ssl_certificate_key certs/default.key;</span>

<span class="s1">            # requires --with-stream_realip_module</span>
<span class="s1">            # set_real_ip_from unix:;</span>

<span class="s1">            ssl_certificate_by_lua_block {</span>
<span class="s1">                    require(&quot;resty.acme.autossl&quot;).serve_tls_alpn_challenge()</span>
<span class="s1">            }</span>

<span class="s1">            content_by_lua_block {</span>
<span class="s1">                    ngx.exit(0)</span>
<span class="s1">            }</span>
<span class="s1">    }</span>
<span class="s1">}</span>
</code></pre></div>

</details>

<p>In the above sample config, we set a http server and two stream server.</p>
<p>The very front stream server listens for 443 port and route to different upstream
based on client ALPN. The tls-alpn-01 responder listens on <code>unix:/tmp/nginx-tls-alpn.sock</code>.
All normal https traffic listens on <code>unix:/tmp/nginx-default.sock</code>.</p>
<div class="highlight"><pre><span></span><code>                                                [stream server unix:/tmp/nginx-tls-alpn.sock ssl]
                                            Y /
[stream server 443] --- ALPN is acme-tls ?
                                            N \
                                                [http server unix:/tmp/nginx-default.sock ssl]
</code></pre></div>
<ul>
<li>The config passed to <code>require("resty.acme.autossl").init</code> in both subsystem should be
kept same as possible.</li>
<li><code>tls-alpn-01</code> challenge handler doesn't need any third party dependency.</li>
<li>You can enable <code>http-01</code> and <code>tls-alpn-01</code> challenge handlers at the same time.</li>
<li><code>http</code> and <code>stream</code> subsystem doesn't share shm, thus considering use a storage other
than <code>shm</code>. If you must use <code>shm</code>, you will need to apply
<a href="https://github.com/fffonion/lua-resty-shdict-server/tree/master/patches">this patch</a>.</li>
</ul>
<h2 id="dns-01-challenge">dns-01 challenge</h2>
<p>DNS-01 challenge is supported on lua-resty-acme &gt; 0.13.0. Currently, following DNS providers are supported:</p>
<ul>
<li><code>cloudflare</code>: Cloudflare</li>
<li><code>dynv6</code>: Dynv6</li>
<li><code>dnspod-intl</code>: Dnspod International (only Dnspod token is supported and use <code>id,token</code> in secret field)</li>
</ul>
<p>To read to how to extend a new DNS provider to work with <code>dns-01</code> challenge, see <a href="#dns-providers">DNS provider</a>.</p>
<p>An example config to use <code>dns-01</code> challenge would be:</p>
<div class="highlight"><pre><span></span><code><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;resty.acme.autossl&quot;</span><span class="p">).</span><span class="n">init</span><span class="p">({</span>
  <span class="c1">-- setting the following to true</span>
  <span class="c1">-- implies that you read and accepted https://letsencrypt.org/repository/</span>
  <span class="n">tos_accepted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">-- uncomment following for first time setup</span>
  <span class="c1">-- staging = true,</span>
  <span class="c1">-- uncomment following to enable RSA + ECC double cert</span>
  <span class="c1">-- domain_key_types = { &#39;rsa&#39;, &#39;ecc&#39; },</span>
  <span class="c1">-- do not set `http-01` or `tls-alpn-01` if you only plan to use dns-01.</span>
  <span class="n">enabled_challenge_handlers</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;dns-01&#39;</span> <span class="p">},</span>
  <span class="n">account_key_path</span> <span class="o">=</span> <span class="s2">&quot;/etc/openresty/account.key&quot;</span><span class="p">,</span>
  <span class="n">account_email</span> <span class="o">=</span> <span class="s2">&quot;youemail@youdomain.com&quot;</span><span class="p">,</span>
  <span class="n">domain_whitelist</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;subdomain.anotherdomain.com&quot;</span> <span class="p">},</span>

  <span class="n">dns_provider_accounts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span>
      <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;cloudflare_prod&quot;</span><span class="p">,</span>
      <span class="n">provider</span> <span class="o">=</span> <span class="s2">&quot;cloudflare&quot;</span><span class="p">,</span>
      <span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;apikey of cloudflare&quot;</span><span class="p">,</span>
      <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;example.com&quot;</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;dynv6_staging&quot;</span><span class="p">,</span>
      <span class="n">provider</span> <span class="o">=</span> <span class="s2">&quot;dynv6&quot;</span><span class="p">,</span>
      <span class="n">secret</span> <span class="o">=</span> <span class="s2">&quot;apikey of dynv6&quot;</span><span class="p">,</span>
      <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;*.anotherdomain.com&quot;</span> <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="c1">-- uncomment following to create anotherdomain.com in CN and *.anotherdomain.com in SAN</span>
  <span class="c1">-- wildcard_domain_in_san = true,</span>
<span class="p">})</span>
</code></pre></div>
<p>By default, this library tries up to 5 minutes for DNS propagation. If the default TTL for dns provider is longer than that, user may want to tune up <code>challenge_start_delay</code> manually to wait longer.</p>
<h2 id="restyacmeautossl">resty.acme.autossl</h2>
<p>A config table can be passed to <code>resty.acme.autossl.init()</code>, the default values are:</p>
<div class="highlight"><pre><span></span><code><span class="n">default_config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">-- accept term of service https://letsencrypt.org/repository/</span>
  <span class="n">tos_accepted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="c1">-- if using the let&#39;s encrypt staging API</span>
  <span class="n">staging</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="c1">-- the path to account private key in PEM format</span>
  <span class="n">account_key_path</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- the account email to register</span>
  <span class="n">account_email</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- number of certificate cache, per type</span>
  <span class="n">cache_size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
  <span class="n">domain_key_paths</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">-- the global domain RSA private key</span>
    <span class="n">rsa</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- the global domain ECC private key</span>
    <span class="n">ecc</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="c1">-- the private key algorithm to use, can be one or both of</span>
  <span class="c1">-- &#39;rsa&#39; and &#39;ecc&#39;</span>
  <span class="n">domain_key_types</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;rsa&#39;</span> <span class="p">},</span>
  <span class="c1">-- restrict registering new cert only with domain defined in this table</span>
  <span class="n">domain_whitelist</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- restrict registering new cert only with domain checked by this function</span>
  <span class="n">domain_whitelist_callback</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- interval to wait before retrying after failed certificate request</span>
  <span class="n">failure_cooloff</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
  <span class="c1">-- function that returns interval to wait before retrying after failed certificate request</span>
  <span class="n">failure_cooloff_callback</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- the threshold to renew a cert before it expires, in seconds</span>
  <span class="n">renew_threshold</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">86400</span><span class="p">,</span>
  <span class="c1">-- interval to check cert renewal, in seconds</span>
  <span class="n">renew_check_interval</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="c1">-- the store certificates</span>
  <span class="n">storage_adapter</span> <span class="o">=</span> <span class="s2">&quot;shm&quot;</span><span class="p">,</span>
  <span class="c1">-- the storage config passed to storage adapter</span>
  <span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">shm_name</span> <span class="o">=</span> <span class="s1">&#39;acme&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="c1">-- the challenge types enabled</span>
  <span class="n">enabled_challenge_handlers</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;http-01&#39;</span> <span class="p">},</span>
  <span class="c1">-- time to wait before signaling ACME server to validate in seconds</span>
  <span class="n">challenge_start_delay</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="c1">-- if true, the request to nginx waits until the cert has been generated and it is used right away</span>
  <span class="n">blocking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="c1">-- if true, the certificate for domain not in whitelist will be deleted from storage</span>
  <span class="n">enabled_delete_not_whitelisted_domain</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="c1">-- the dict of dns providers, each provider should have following struct:</span>
  <span class="c1">-- {</span>
  <span class="c1">--   name = &quot;prod_account&quot;,</span>
  <span class="c1">--   provider = &quot;provider_name&quot;, -- &quot;cloudflare&quot; or &quot;dynv6&quot;</span>
  <span class="c1">--   secret  = &quot;the api key or token&quot;,</span>
  <span class="c1">--   domains = { &quot;example.com&quot;, &quot;*.example.com&quot; }, -- the list of domains that can be used with this provider</span>
  <span class="c1">-- }</span>
  <span class="n">dns_provider_accounts</span> <span class="o">=</span> <span class="p">{},</span>
  <span class="c1">-- if enabled, wildcard domains like *.example.com will be created as SAN and CN will be example.com</span>
  <span class="n">wildcard_domain_in_san</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>If <code>account_key_path</code> is not specified, a new account key will be created
<strong>everytime</strong> Nginx reloads configuration. Note this may trigger <strong>New Account</strong>
<a href="https://letsencrypt.org/docs/rate-limits/">rate limiting</a> on Let's Encrypt API.</p>
<p>If <code>domain_key_paths</code> is not specified, a new private key will be generated
for each certificate (4096-bits RSA and 256-bits prime256v1 ECC). Note that
generating such key will block worker and will be especially noticable on VMs
where entropy is low.</p>
<p>Pass config table directly to ACME client as second parameter. The following example
demonstrates how to use a CA provider other than Let's Encrypt and also set
the preferred chain.</p>
<div class="highlight"><pre><span></span><code><span class="n">resty</span><span class="p">.</span><span class="n">acme</span><span class="p">.</span><span class="n">autossl</span><span class="p">.</span><span class="n">init</span><span class="p">({</span>
    <span class="n">tos_accepted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">account_email</span> <span class="o">=</span> <span class="s2">&quot;example@example.com&quot;</span><span class="p">,</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="n">api_uri</span> <span class="o">=</span> <span class="s2">&quot;https://acme.otherca.com/directory&quot;</span><span class="p">,</span>
    <span class="n">preferred_chain</span> <span class="o">=</span> <span class="s2">&quot;OtherCA PKI Root CA&quot;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
<p>See also <a href="#storage-adapters">Storage Adapters</a> below.</p>
<p>When using distributed storage types, it's useful to bump up <code>challenge_start_delay</code> to allow
changes in storage to propogate around. When <code>challenge_start_delay</code> is set to 0, no wait
will be performed before start validating challenges.</p>
<h3 id="autosslget_certkey">autossl.get_certkey</h3>
<p><strong>syntax</strong>: <em>certkey, err = autossl.get_certkey(domain, type?)</em></p>
<p>Return the PEM-encoded certificate and private key for <code>domain</code> from storage. Optionally
accepts a <code>type</code> parameter which can be <code>"rsa"</code> or <code>"ecc"</code>; if omitted, <code>type</code> will default
to <code>"rsa"</code>.</p>
<h2 id="restyacmeclient">resty.acme.client</h2>
<h3 id="clientnew">client.new</h3>
<p><strong>syntax</strong>: <em>c, err = client.new(config)</em></p>
<p>Create a ACMEv2 client.</p>
<p>Default values for <code>config</code> are:</p>
<div class="highlight"><pre><span></span><code><span class="n">default_config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">-- the ACME v2 API endpoint to use</span>
  <span class="n">api_uri</span> <span class="o">=</span> <span class="s2">&quot;https://acme-v02.api.letsencrypt.org/directory&quot;</span><span class="p">,</span>
  <span class="c1">-- the account email to register</span>
  <span class="n">account_email</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- the account key in PEM format text</span>
  <span class="n">account_key</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- the account kid (as an URL)</span>
  <span class="n">account_kid</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- external account binding key id</span>
  <span class="n">eab_kid</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- external account binding hmac key, base64url encoded</span>
  <span class="n">eab_hmac_key</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- external account registering handler</span>
  <span class="n">eab_handler</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- storage for challenge</span>
  <span class="n">storage_adapter</span> <span class="o">=</span> <span class="s2">&quot;shm&quot;</span><span class="p">,</span>
  <span class="c1">-- the storage config passed to storage adapter</span>
  <span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">shm_name</span> <span class="o">=</span> <span class="s2">&quot;acme&quot;</span>
  <span class="p">},</span>
  <span class="c1">-- the challenge types enabled, selection of `http-01` and `tls-alpn-01`</span>
  <span class="n">enabled_challenge_handlers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;http-01&quot;</span><span class="p">},</span>
  <span class="c1">-- select preferred root CA issuer&#39;s Common Name if appliable</span>
  <span class="n">preferred_chain</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- callback function that allows to wait before signaling ACME server to validate</span>
  <span class="n">challenge_start_callback</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
  <span class="c1">-- the dict of dns providers, each provider should have following struct:</span>
  <span class="n">dns_provider_accounts</span> <span class="o">=</span> <span class="p">{},</span>
<span class="p">}</span>
</code></pre></div>
<p>If <code>account_kid</code> is omitted, user must call <code>client:new_account()</code> to register a
new account. Note that when using the same <code>account_key</code>, <code>client:new_account()</code>
will return the same <code>kid</code> that is previosuly registered.</p>
<p>If CA requires <a href="#external-account-binding">External Account Binding</a>, user can set
<code>eab_kid</code> and <code>eab_hmac_key</code> to load an existing account, or set <code>account_email</code> and
<code>eab_handler</code> to register a new account. <code>eab_hmac_key</code> must be base64 url encoded.
In later case, user must call <code>client:new_account()</code> to register a new account.
<code>eab_handler</code> must be an function that accepts account_email as parameter and
returns <code>eab_kid</code>, <code>eab_hmac_key</code> and error if any.</p>
<div class="highlight"><pre><span></span><code><span class="n">eab_handler</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">account_email</span><span class="p">)</span>
  <span class="c1">-- do something to register an account with account_email</span>
  <span class="c1">-- if err then</span>
  <span class="c1">--  return nil, nil, err</span>
  <span class="c1">-- end</span>
  <span class="kr">return</span> <span class="n">eab_kid</span><span class="p">,</span> <span class="n">eab_hmac_key</span>
<span class="kr">end</span>
</code></pre></div>
<p>The following CA provider's EAB handler is supported by lua-resty-acme and user doesn't
need to implement their own <code>eab_handler</code>:</p>
<ul>
<li><a href="https://zerossl.com/">ZeroSSL</a></li>
</ul>
<p><code>preferred_chain</code> is used to select a chain with matching Common Name in its root CA. For example,
user can use use <code>"ISRG Root X1"</code> to force use the new default chain in Let's Encrypt. When no
value is configured or the configured name is not found in any chain, the default chain will be
used.</p>
<p><code>challenge_start_callback</code> is a callback function to allow the client to wait before signalling
ACME server to start validate challenge. It's useful in a distributed setup where challenges take
time to propogate. <code>challenge_start_callback</code> accepts <code>challenge_type</code> and <code>challenge_token</code>.
The client calls this function every second until it returns <code>true</code> indicating challenge should start;
if this <code>challenge_start_callback</code> is not set, no wait will be performed.</p>
<div class="highlight"><pre><span></span><code><span class="n">challenge_start_callback</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">challenge_type</span><span class="p">,</span> <span class="n">challenge_token</span><span class="p">)</span>
  <span class="c1">-- do something here</span>
  <span class="c1">-- if we are good</span>
  <span class="kr">return</span> <span class="kc">true</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also <a href="#storage-adapters">Storage Adapters</a> below.</p>
<h3 id="clientinit">client:init</h3>
<p><strong>syntax</strong>: <em>err = client:init()</em></p>
<p>Initialize the client, requires availability of cosocket API. This function will
login or register an account.</p>
<h3 id="clientorder_certificate">client:order_certificate</h3>
<p><strong>syntax</strong>: <em>err = client:order_certificate(domain,...)</em></p>
<p>Create a certificate with one or more domains. Note that wildcard domains are not
supported as it can only be verified by <a href="https://letsencrypt.org/docs/challenge-types/">dns-01</a> challenge.</p>
<h3 id="clientserve_http_challenge">client:serve_http_challenge</h3>
<p><strong>syntax</strong>: <em>client:serve_http_challenge()</em></p>
<p>Serve <a href="https://letsencrypt.org/docs/challenge-types/">http-01</a> challenge. A common use case will be to
put this as a content_by_* block for <code>/.well-known</code> path.</p>
<h3 id="clientserve_tls_alpn_challenge">client:serve_tls_alpn_challenge</h3>
<p><strong>syntax</strong>: <em>client:serve_tls_alpn_challenge()</em></p>
<p>Serve <a href="https://letsencrypt.org/docs/challenge-types/">tls-alpn-01</a> challenge. See
<a href="https://github.com/fffonion/lua-resty-acme#tls-alpn-01-challenge">this section</a> on how to use this handler.</p>
<h2 id="storage-adapters">Storage Adapters</h2>
<p>Storage adapters are used in <code>autossl</code> or acme <code>client</code> to storage temporary or
persistent data. Depending on the deployment environment, there're currently
five storage adapters available to select from. To implement a custom storage
adapter, please refer to
<a href="https://github.com/fffonion/lua-resty-acme/blob/master/lib/resty/acme/storage/README.md">this doc</a>.</p>
<h3 id="file">file</h3>
<p>Filesystem based storage. Sample configuration:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">dir</span> <span class="o">=</span> <span class="s1">&#39;/etc/openresty/storage&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
If <code>dir</code> is omitted, the OS temporary directory will be used.</p>
<p><code>luafilesystem</code> or <code>luafilesystem-ffi</code> is needed when using the <code>file</code> storage for renewal.</p>
<h3 id="shm">shm</h3>
<p>Lua shared dict based storage. Note this storage is volatile between Nginx restarts
(not reloads). Sample configuration:</p>
<div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">shm_name</span> <span class="o">=</span> <span class="s1">&#39;dict_name&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="redis">redis</h3>
<p>Redis based storage. The default config is:</p>
<div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">6379</span><span class="p">,</span>
    <span class="n">database</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="c1">-- Redis authentication key</span>
    <span class="n">auth</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="n">ssl</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="n">ssl_verify</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="n">ssl_server_name</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- namespace as a prefix of key</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>Redis &gt;= 2.6.0 is required as this storage requires <a href="https://redis.io/commands/pexpire">PEXPIRE</a>.</p>
<h3 id="vault">vault</h3>
<p>Hashicorp <a href="https://www.vaultproject.io/">Vault</a> based storage.
Only <a href="https://www.vaultproject.io/api/secret/kv/kv-v2.html">KV V2</a> backend is supported.
The default config is:</p>
<div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">8200</span><span class="p">,</span>
    <span class="c1">-- secrets kv prefix path</span>
    <span class="n">kv_path</span> <span class="o">=</span> <span class="s2">&quot;acme&quot;</span><span class="p">,</span>
    <span class="c1">-- timeout in ms</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
    <span class="c1">-- use HTTPS</span>
    <span class="n">https</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">-- turn on tls verification</span>
    <span class="n">tls_verify</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="c1">-- SNI used in request, default to host if omitted</span>
    <span class="n">tls_server_name</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- Auth Method, default to token, can be &quot;token&quot; or &quot;kubernetes&quot;</span>
    <span class="n">auth_method</span> <span class="o">=</span> <span class="s2">&quot;token&quot;</span>
    <span class="c1">-- Vault token</span>
    <span class="n">token</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- Vault&#39;s authentication path to use</span>
    <span class="n">auth_path</span> <span class="o">=</span>  <span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span>
    <span class="c1">-- The role to try and assign</span>
    <span class="n">auth_role</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- The path to the JWT</span>
    <span class="n">jwt_path</span> <span class="o">=</span> <span class="s2">&quot;/var/run/secrets/kubernetes.io/serviceaccount/token&quot;</span><span class="p">,</span>
    <span class="c1">-- Vault namespace</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="support-for-different-auth-method">Support for different auth method</h4>
<ul>
<li>Token: This is the default and allows to pass a literal "token" in the configuration</li>
<li>Kubernetes: Via this method, one can utilize vault's built-in auth method for kubernetes
  What this basically this is take the service account token and validates it has been signed by Kubernetes CA.
  The major benefit here, is that config files don't expose your token anymore.</li>
</ul>
<p>The following configurations apply here:
  <code>lua
    -- Vault's authentication path to use
    auth_path =  "kubernetes",
    -- The role to try and assign
    auth_role = nil,
    -- The path to the JWT
    jwt_path = "/var/run/secrets/kubernetes.io/serviceaccount/token",</code></p>
<h3 id="consul">consul</h3>
<p>Hashicorp <a href="https://www.consul.io/">Consul</a> based storage. The default config is:</p>
<div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">8500</span><span class="p">,</span>
    <span class="c1">-- kv prefix path</span>
    <span class="n">kv_path</span> <span class="o">=</span> <span class="s2">&quot;acme&quot;</span><span class="p">,</span>
    <span class="c1">-- Consul ACL token</span>
    <span class="n">token</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="c1">-- timeout in ms</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="etcd">etcd</h3>
<p><a href="https://etcd.io">etcd</a> based storage. Right now only <code>v3</code> protocol is supported, and etcd server
version should be &gt;= v3.4.0.
The default config is:</p>
<div class="highlight"><pre><span></span><code><span class="n">storage_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">http_host</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:4001&#39;</span><span class="p">,</span>
    <span class="n">key_prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
    <span class="n">ssl_verify</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>Etcd storage requires <a href="https://github.com/api7/lua-resty-etcd">lua-resty-etcd</a> library to installed.
It can be manually installed with <code>opm install api7/lua-resty-etcd</code> or <code>luarocks install lua-resty-etcd</code>.</p>
<h2 id="dns-providers">DNS providers</h2>
<p>TO create a custom DNS provider, follow these steps:</p>
<ul>
<li>Create a file like <code>route53.lua</code> under <code>lib/resty/acme/dns_provider</code></li>
<li>Implement following function signature</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">_M</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
  <span class="c1">-- ... </span>
  <span class="kr">return</span> <span class="n">self</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">_M</span><span class="p">:</span><span class="nf">post_txt_record</span><span class="p">(</span><span class="n">fqdn</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">ok</span><span class="p">,</span> <span class="n">err</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">_M</span><span class="p">:</span><span class="nf">delete_txt_record</span><span class="p">(</span><span class="n">fqdn</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">ok</span><span class="p">,</span> <span class="n">err</span>
<span class="kr">end</span>
</code></pre></div>
<p>Where <code>token</code> is the apikey, <code>fqdn</code> is the DNS record name to set record, and <code>content</code> is the value of the record.</p>
<h2 id="testing">Testing</h2>
<p>Setup e2e test environment by running <code>bash t/fixtures/prepare_env.sh</code>.</p>
<p>Then run <code>cpanm install Test::Nginx::Socket</code> and then <code>prove -r t</code>.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc8555">Automatic Certificate Management Environment (ACME)</a></li>
<li><a href="https://github.com/haproxytech/haproxy-lua-acme">haproxytech/haproxy-lua-acme</a> The ACME Lua implementation used in HAProxy.</li>
<li><a href="https://github.com/GUI/lua-resty-auto-ssl">GUI/lua-resty-auto-ssl</a></li>
<li><a href="https://github.com/fffonion/lua-resty-openssl">lua-resty-openssl</a></li>
<li><a href="https://letsencrypt.org/docs/rate-limits/">Let's Encrypt API rate limits</a></li>
</ul>
<h2 id="github">GitHub</h2>
<p>You may find additional configuration tips and documentation for this module in the <a href="https://github.com/fffonion/lua-resty-acme" target="_blank">GitHub repository for 
nginx-module-acme</a>.</p>







  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2023 GetPageSpeed LLC 2023
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/GetPageSpeed" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/GetPageSpeed" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/getpagespeed" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/getpagespeed/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/GetPageSpeed" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.top", "navigation.tabs", "search.suggest", "content.tooltips", "content.tabs.link", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>