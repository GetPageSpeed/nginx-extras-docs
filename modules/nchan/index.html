
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Automatic documentation from sources, for NGINX Extras.">
      
      
        <meta name="author" content="Danila Vershinin">
      
      
        <link rel="canonical" href="https://nginx-extras.getpagespeed.com/modules/nchan/">
      
      
        <link rel="prev" href="../naxsi/">
      
      
        <link rel="next" href="../ndk/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>nchan - NGINX Extras Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-YZHLYCQK9D"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-YZHLYCQK9D",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-YZHLYCQK9D",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="nchan - NGINX Extras Documentation" >
      
        <meta  property="og:description"  content="Automatic documentation from sources, for NGINX Extras." >
      
        <meta  property="og:image"  content="https://nginx-extras.getpagespeed.com/assets/images/social/modules/nchan.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://nginx-extras.getpagespeed.com/modules/nchan/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="nchan - NGINX Extras Documentation" >
      
        <meta  name="twitter:description"  content="Automatic documentation from sources, for NGINX Extras." >
      
        <meta  name="twitter:image"  content="https://nginx-extras.getpagespeed.com/assets/images/social/modules/nchan.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="getpagespeed" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nchan-scalable-flexible-pubsub-server-for-the-modern-web" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  NGINX Extras is <a href="https://www.getpagespeed.com/repo-subscribe" target="_blank"><em>subscription-ware</em></a> by GetPageSpeed, allowing your server to be secure and fast.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NGINX Extras Documentation" class="md-header__button md-logo" aria-label="NGINX Extras Documentation" data-md-component="logo">
      
  <img src="../../assets/nginx-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NGINX Extras Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nchan
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="getpagespeed" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Modules

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lua/" class="md-tabs__link">
          
  
  Lua Scripting

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../branches/" class="md-tabs__link">
          
  
  Distributions

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://www.getpagespeed.com/redhat" class="md-tabs__link">
        
  
    
  
  RPM Repository

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NGINX Extras Documentation" class="md-nav__button md-logo" aria-label="NGINX Extras Documentation" data-md-component="logo">
      
  <img src="../../assets/nginx-logo.png" alt="logo">

    </a>
    NGINX Extras Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accept-language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    accept-language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ajp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ajp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../array-var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    array-var
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-digest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-digest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-ldap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-pam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-pam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-totp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auth-totp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bot-verifier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bot-verifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../brotli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    brotli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache-purge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cache-purge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../captcha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    captcha
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../combined-upstreams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    combined-upstreams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../concat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    concat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookie-flag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie-flag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookie-limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie-limit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    coolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dav-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dav-ext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../doh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    doh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-etag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic-etag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-limit-req/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic-limit-req
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../echo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    echo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encrypted-session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    encrypted-session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../execute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    execute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../f4fhds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    f4fhds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fancyindex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fancyindex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fips-check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fips-check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../form-input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    form-input
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../geoip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geoip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../geoip2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geoip2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../google/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    google
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graphite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    graphite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../headers-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    headers-more
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hmac-secure-link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hmac-secure-link
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../html-sanitize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    html-sanitize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iconv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iconv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image-filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    image-filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../immutable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    immutable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ipscrub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ipscrub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jpeg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jpeg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../js-challenge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    js-challenge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json-var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json-var
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jwt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../length-hiding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    length-hiding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../let/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    let
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../live-common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    live-common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../log-zmq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log-zmq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    memc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../naxsi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    naxsi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    nchan
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    nchan
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status-and-history" class="md-nav__link">
    <span class="md-ellipsis">
      Status and History
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status and History">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-from-nginx-http-push-module" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade from Nginx HTTP Push Module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#does-it-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Does it scale?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conceptual-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Conceptual Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publisher-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publisher Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publisher Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#publishing-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-publisher-endpoint-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Other Publisher Endpoint Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-channel-settings-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Channel Settings Work
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subscriber-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subscriber Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#long-polling" class="md-nav__link">
    <span class="md-ellipsis">
      Long-Polling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interval-polling" class="md-nav__link">
    <span class="md-ellipsis">
      Interval-Polling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket" class="md-nav__link">
    <span class="md-ellipsis">
      Websocket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsource" class="md-nav__link">
    <span class="md-ellipsis">
      EventSource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-multipartmixed" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP multipart/mixed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-raw-stream" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Raw Stream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-chunked-transfer" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Chunked Transfer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      PubSub Endpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-channel-id" class="md-nav__link">
    <span class="md-ellipsis">
      The Channel ID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Channel ID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-multiplexing" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Multiplexing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Groups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Channel Groups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limits-and-accounting" class="md-nav__link">
    <span class="md-ellipsis">
      Limits and Accounting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks-and-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Hooks and Callbacks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hooks and Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Request Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscriber-presence" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber Presence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      Message Forwarding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-a-redis-server" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to a Redis Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Redis Cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-availability" class="md-nav__link">
    <span class="md-ellipsis">
      High Availability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failover-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Failover Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-redis-securely" class="md-nav__link">
    <span class="md-ellipsis">
      Using Redis securely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tweaks-and-optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      Tweaks and Optimizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Statistics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introspection" class="md-nav__link">
    <span class="md-ellipsis">
      Introspection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introspection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-events" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nchan_stub_status-stats" class="md-nav__link">
    <span class="md-ellipsis">
      nchan_stub_status Stats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-channels" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Channels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing Channels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#securing-publisher-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Publisher Endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-a-channel-private" class="md-nav__link">
    <span class="md-ellipsis">
      Keeping a Channel Private
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keeping a Channel Private">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#good-ids" class="md-nav__link">
    <span class="md-ellipsis">
      Good IDs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x-accel-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      X-Accel-Redirect
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revoking-channel-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Revoking Channel Authorization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-directives" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Directives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contribute" class="md-nav__link">
    <span class="md-ellipsis">
      Contribute
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ndk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ndk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../njs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    njs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ntlm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ntlm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pagespeed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pagespeed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../passenger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    passenger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    perl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phantom-token/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    phantom-token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postgres/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postgres
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../push-stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    push-stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rdns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rdns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rtmp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rtmp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../secure-token/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    secure-token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security-headers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    security-headers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../set-misc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    set-misc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shibboleth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shibboleth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slowfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slowfs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../small-light/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    small-light
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spnego-http-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    spnego-http-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../srcache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    srcache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../srt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    srt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../statsd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    statsd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sticky/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sticky
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stream-lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stream-sts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-sts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stream-upsync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream-upsync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../substitutions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    substitutions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sxg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sxg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sysguard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sysguard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testcookie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    testcookie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traffic-accounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traffic-accounting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unbrotli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    unbrotli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../untar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    untar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upload
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upstream-fair/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-fair
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upstream-jdomain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-jdomain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upsync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upsync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../webp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xslt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xslt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zstd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zstd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lua Scripting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Lua Scripting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/acme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    acme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/ada/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ada
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/auto-ssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auto-ssl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/aws-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/aws-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-sdk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/balancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    balancer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/base-encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base-encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/checkups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    checkups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/consul/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    consul
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/consul-event/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    consul-event
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/cookie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/cors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/counter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    counter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/ctxdump/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ctxdump
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/dns-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dns-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/etcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    etcd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/exec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/feishu-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    feishu-auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/fileinfo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fileinfo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/ftpclient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ftpclient
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/global-throttle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    global-throttle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    healthcheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/hmac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hmac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/hoedown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hoedown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/http2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/httpipe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    httpipe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/hyperscan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hyperscan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/influx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    influx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/ini/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ini
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/injection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    injection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/iputils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iputils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/jit-uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jit-uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/jq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/jsonrpc-batch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonrpc-batch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/jump-consistent-hash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jump-consistent-hash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jwt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/kafka/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kafka
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/libcjson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libcjson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/libr3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libr3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/limit-rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit-rate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/limit-traffic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit-traffic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/lmdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lmdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/locations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/lock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/logger-socket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logger-socket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/lrucache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lrucache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/macaroons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macaroons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/mail/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/maxminddb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    maxminddb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/memcached/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    memcached
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/mlcache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mlcache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/multiplexer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multiplexer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/murmurhash2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    murmurhash2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mysql
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/nettle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nettle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/newrelic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    newrelic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/nsq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nsq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/ntlm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ntlm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/openidc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    openidc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/openssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    openssl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/perf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    perf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/prettycjson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prettycjson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/pubsub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pubsub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/qless/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qless
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/qless-web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qless-web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/rabbitmqstomp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rabbitmqstomp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/rack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/radixtree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    radixtree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/redis-connector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-connector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/redis-ratelimit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-ratelimit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/redis-util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis-util
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/repl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/reqargs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reqargs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/riak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    riak
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/rsa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rsa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/scrypt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scrypt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/signal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    signal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/smtp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    smtp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/snappy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    snappy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/sniproxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sniproxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/socket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/string/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    string
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/t1k/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    t1k
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/tarantool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tarantool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/timer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/tlc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tlc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/tsort/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tsort
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/txid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    txid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upload
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/upstream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/upstream-healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    upstream-healthcheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/vhost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vhost
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/waf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    waf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/weauth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    weauth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/websocket-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocket-proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/woothee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    woothee
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/worker-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    worker-events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/xxhash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xxhash
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Distributions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Distributions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../branches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGINX Branches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nginx-mod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGINX-MOD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tengine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tengine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plesk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plesk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP/3 (QUIC)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../angie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angie
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.getpagespeed.com/redhat" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RPM Repository
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status-and-history" class="md-nav__link">
    <span class="md-ellipsis">
      Status and History
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status and History">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-from-nginx-http-push-module" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade from Nginx HTTP Push Module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#does-it-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Does it scale?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conceptual-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Conceptual Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publisher-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publisher Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publisher Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#publishing-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-publisher-endpoint-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Other Publisher Endpoint Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-channel-settings-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Channel Settings Work
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subscriber-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subscriber Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#long-polling" class="md-nav__link">
    <span class="md-ellipsis">
      Long-Polling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interval-polling" class="md-nav__link">
    <span class="md-ellipsis">
      Interval-Polling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket" class="md-nav__link">
    <span class="md-ellipsis">
      Websocket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsource" class="md-nav__link">
    <span class="md-ellipsis">
      EventSource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-multipartmixed" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP multipart/mixed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-raw-stream" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Raw Stream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-chunked-transfer" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Chunked Transfer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      PubSub Endpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-channel-id" class="md-nav__link">
    <span class="md-ellipsis">
      The Channel ID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Channel ID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-multiplexing" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Multiplexing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Groups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Channel Groups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limits-and-accounting" class="md-nav__link">
    <span class="md-ellipsis">
      Limits and Accounting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks-and-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Hooks and Callbacks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hooks and Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Request Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscriber-presence" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber Presence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      Message Forwarding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-a-redis-server" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to a Redis Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Redis Cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-availability" class="md-nav__link">
    <span class="md-ellipsis">
      High Availability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failover-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Failover Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-redis-securely" class="md-nav__link">
    <span class="md-ellipsis">
      Using Redis securely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tweaks-and-optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      Tweaks and Optimizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Statistics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introspection" class="md-nav__link">
    <span class="md-ellipsis">
      Introspection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introspection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-events" class="md-nav__link">
    <span class="md-ellipsis">
      Channel Events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nchan_stub_status-stats" class="md-nav__link">
    <span class="md-ellipsis">
      nchan_stub_status Stats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-channels" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Channels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing Channels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#securing-publisher-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Publisher Endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-a-channel-private" class="md-nav__link">
    <span class="md-ellipsis">
      Keeping a Channel Private
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keeping a Channel Private">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#good-ids" class="md-nav__link">
    <span class="md-ellipsis">
      Good IDs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x-accel-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      X-Accel-Redirect
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revoking-channel-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Revoking Channel Authorization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-directives" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Directives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contribute" class="md-nav__link">
    <span class="md-ellipsis">
      Contribute
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="nchan-scalable-flexible-pubsub-server-for-the-modern-web"><em>nchan</em>: Scalable, flexible pub/sub server for the modern web</h1>
<h2 id="installation">Installation</h2>
<p>You can install this module in any <abbr title="Red Hat Enterprise Linux">RHEL</abbr>-based distribution, including, but not limited to:</p>
<ul>
<li>RedHat Enterprise Linux 7, 8, 9</li>
<li>CentOS 7, 8, 9</li>
<li>AlmaLinux 8, 9</li>
<li>Rocky Linux 8, 9</li>
<li>Amazon Linux 2 and Amazon Linux 2023</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">CentOS/<abbr title="Red Hat Enterprise Linux">RHEL</abbr> 7 and Amazon Linux 2</label><label for="__tabbed_1_2">CentOS/<abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8, 9 and Fedora Linux, Amazon Linux 2023, etc.</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://extras.getpagespeed.com/release-latest.rpm
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://epel.cloud/pub/epel/epel-release-latest-7.noarch.rpm<span class="w"> </span>
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>nginx-module-nchan
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>dnf<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>https://extras.getpagespeed.com/release-latest.rpm<span class="w"> </span>
dnf<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>nginx-module-nchan
</code></pre></div>
</div>
</div>
</div>
<p>Enable the module by adding the following at the top of <code>/etc/nginx/nginx.conf</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">load_module</span><span class="w"> </span><span class="s">modules/ngx_nchan_module.so</span><span class="p">;</span>
</code></pre></div>
<p>This document describes nginx-module-nchan <a href="https://github.com/slact/nchan/releases/tag/v1.3.7" target="_blank">v1.3.7</a> 
released on Sep 20 2024.</p>
<hr />
<p><img class="logo" alt="NCHAN" src="https://nchan.io/github-logo.png" /></p>
<p><a href="https://nchan.io">https://nchan.io</a></p>
<p>Nchan is a scalable, flexible pub/sub server for the modern web, built as a module for the <a href="http://nginx.org">Nginx</a> web server. It can be configured as a standalone server, or as a shim between your application and hundreds, thousands, or millions of live subscribers. It can buffer messages in memory, on-disk, or via <a href="http://redis.io">Redis</a>. All connections are handled asynchronously and distributed among any number of worker processes. It can also scale to many Nginx servers with <a href="http://redis.io">Redis</a>.</p>
<p>Messages are <a href="#publisher-endpoints">published</a> to channels with <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>POST</code> requests or Websocket, and <a href="#subscriber-endpoint">subscribed</a> also through <a href="#websocket">Websocket</a>, <a href="#long-polling">long-polling</a>, <a href="#eventsource">EventSource</a> (SSE), old-fashioned <a href="#interval-polling">interval polling</a>, <a href="#http-chunked-transfer">and</a> <a href="#http-multipart-mixed">more</a>.</p>
<p>In a web browser, you can use Websocket or EventSource natively, or the <a href="https://github.com/slact/nchan.js">NchanSubscriber.js</a> wrapper library. It supports Long-Polling, EventSource, and resumable Websockets, and has a few other added convenience options. It's also available on <a href="https://www.npmjs.com/package/nchan">NPM</a>.</p>
<h2 id="features">Features</h2>
<ul>
<li>RESTful, <abbr title="Hyper Text Transfer Protocol">HTTP</abbr>-native <a href="#publishing-messages">API</a>.</li>
<li>Supports <a href="#websocket">Websocket</a>, <a href="#eventsource">EventSource (Server-Sent Events)</a>, <a href="#long-polling">Long-Polling</a> and other <abbr title="Hyper Text Transfer Protocol">HTTP</abbr>-based subscribers.</li>
<li>Per-channel configurable message buffers with no-repeat, no-loss message delivery guarantees.</li>
<li>Subscribe to <a href="#channel-multiplexing">hundreds of channels</a> over a single subscriber connection.</li>
<li><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> request <a href="#hooks-and-callbacks">callbacks and hooks</a> for easy integration.</li>
<li>Introspection with <a href="#channel-events">channel events</a> and <a href="#nchan_stub_status-stats">url for monitoring performance statistics</a>.</li>
<li>Channel <a href="#channel-groups">group</a> usage <a href="#limits-and-accounting">accounting and limits</a>.</li>
<li>Fast, nonblocking <a href="#memory-storage">shared-memory local message storage</a> and optional, slower, persistent storage with <a href="#redis">Redis</a>.</li>
<li>Horizontally scalable (using <a href="#redis">Redis</a>).</li>
<li>Auto-failover and <a href="#high-availability">high availability</a> with no single point of failure using <a href="#redis-cluster">Redis Cluster</a>.</li>
</ul>
<h2 id="status-and-history">Status and History</h2>
<p>The latest Nchan release is 1.3.7 (September 19, 2024) (<a href="https://nchan.io/changelog">changelog</a>).</p>
<p>The first iteration of Nchan was written in 2009-2010 as the <a href="https://pushmodule.slact.net">Nginx <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Push Module</a>, and was vastly refactored into its present state in 2014-2016.</p>
<h4 id="upgrade-from-nginx-http-push-module">Upgrade from Nginx <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Push Module</h4>
<p>Although Nchan is backwards-compatible with all Push Module configuration directives, some of the more unusual and rarely used settings have been disabled and will be ignored (with a warning). See the <a href="https://nchan.io/upgrade">upgrade page</a> for a detailed list of changes and improvements, as well as a full list of incompatibilities.</p>
<h2 id="does-it-scale">Does it scale?</h2>
<p><img class="benchmark_graph" alt="benchmarking internal subscriber response times" src="https://nchan.io/img/benchmark_internal_total.png" /></p>
<p>Yes it does. Like Nginx, Nchan can easily handle as much traffic as you can throw at it. I've tried to benchmark it, but my benchmarking tools are much slower than Nchan. The data I've gathered is on how long Nchan itself takes to respond to every subscriber after publishing a message -- this excludes TCP handshake times and internal <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> request parsing. Basically, it measures how Nchan scales assuming all other components are already tuned for scalability. The graphed data are averages of 5 runs with 50-byte messages.</p>
<p>With a well-tuned OS and network stack on commodity server hardware, expect to handle upwards of 300K concurrent subscribers per second at minimal CPU load. Nchan can also be scaled out to multiple Nginx instances using the <a href="#nchan_use_redis">Redis storage engine</a>, and that too can be scaled up beyond a single-point-of-failure by using <a href="#redis-cluster">Redis Cluster</a>.</p>
<h2 id="getting-started">Getting Started</h2>
<p>Once you've built and installed Nchan, it's very easy to start using. Add two locations to your nginx config:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#...</span>
<span class="k">http</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#...</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/sub</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$arg_id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/pub</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$arg_id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You can now publish messages to channels by <code>POST</code>ing data to <code>/pub?id=channel_id</code> , and subscribe by pointing Websocket, EventSource, or <a href="https://github.com/slact/nchan.js">NchanSubscriber.js</a> to <code>sub/?id=channel_id</code>. It's that simple.</p>
<p>But Nchan is very flexible and highly configurable. So, of course, it can get a lot more complicated...</p>
<h3 id="conceptual-overview">Conceptual Overview</h3>
<p>The basic unit of most pub/sub solutions is the messaging <em>channel</em>. Nchan is no different. Publishers send messages to channels with a certain <em>channel id</em>, and subscribers subscribed to those channels receive them. Some number of messages may be buffered for a time in a channel's message buffer before they are deleted. Pretty simple, right? </p>
<p>Well... the trouble is that nginx configuration does not deal with channels, publishers, and subscribers. Rather, it has several sections for incoming requests to match against <em>server</em> and <em>location</em> sections. <strong>Nchan configuration directives map servers and locations onto channel publishing and subscribing endpoints</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#very basic nchan config</span>
<span class="k">worker_processes</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>

<span class="k">http</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w">       </span><span class="mi">80</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/sub</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">foobar</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/pub</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">foobar</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The above maps requests to the URI <code>/sub</code> onto the channel <code>foobar</code>'s <em>subscriber endpoint</em> , and similarly <code>/pub</code> onto channel <code>foobar</code>'s <em>publisher endpoint</em>.</p>
<h2 id="publisher-endpoints">Publisher Endpoints</h2>
<p>Publisher endpoints are Nginx config <em>locations</em> with the <a href="#nchan_publisher"><em><code>nchan_publisher</code></em></a> directive.</p>
<p>Messages can be published to a channel by sending <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <strong>POST</strong> requests with the message contents to the <em>publisher endpoint</em> locations. You can also publish messages through a <strong>Websocket</strong> connection to the same location.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/pub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#example publisher location</span>
<span class="w">    </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">foo</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_message_buffer_length</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_message_timeout</span><span class="w"> </span><span class="mi">5m</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<!-- tag:publisher -->

<h3 id="publishing-messages">Publishing Messages</h3>
<p>Requests and websocket messages are responded to with information about the channel at time of message publication. Here's an example from publishing with <code>curl</code>:</p>
<div class="highlight"><pre><span></span><code><span class="go">&gt;  curl --request POST --data &quot;test message&quot; http://127.0.0.1:80/pub</span>

<span class="go"> queued messages: 5</span>
<span class="go"> last requested: 18 sec. ago</span>
<span class="go"> active subscribers: 0</span>
<span class="go"> last message id: 1450755280:0</span>
</code></pre></div>
<p>The response can be in plaintext (as above), JSON, or XML, based on the request's <em><code>Accept</code></em> header:</p>
<div class="highlight"><pre><span></span><code><span class="go">&gt; curl --request POST --data &quot;test message&quot; -H &quot;Accept: text/json&quot; http://127.0.0.2:80/pub</span>

<span class="go"> {&quot;messages&quot;: 5, &quot;requested&quot;: 18, &quot;subscribers&quot;: 0, &quot;last_message_id&quot;: &quot;1450755280:0&quot; }</span>
</code></pre></div>
<p>Websocket publishers also receive the same responses when publishing, with the encoding determined by the <em><code>Accept</code></em> header present during the handshake.</p>
<p>The response code for an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> request is <em><code>202</code> Accepted</em> if no subscribers are present at time of publication, or <em><code>201</code> Created</em> if at least 1 subscriber was present.</p>
<p>Metadata can be added to a message when using an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> POST request for publishing. A <code>Content-Type</code> header will be associated as the message's content type (and output to Long-Poll, Interval-Poll, and multipart/mixed subscribers). A <code>X-EventSource-Event</code> header can also be used to associate an EventSource <code>event:</code> line value with a message.</p>
<h3 id="other-publisher-endpoint-actions">Other Publisher Endpoint Actions</h3>
<p><strong><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>GET</code></strong> requests return channel information without publishing a message. The response code is <code>200</code> if the channel exists, and <code>404</code> otherwise:<br />
<div class="highlight"><pre><span></span><code><span class="go">&gt; curl --request POST --data &quot;test message&quot; http://127.0.0.2:80/pub</span>
<span class="go">  ...</span>

<span class="go">&gt; curl -v --request GET -H &quot;Accept: text/json&quot; http://127.0.0.2:80/pub</span>

<span class="go"> {&quot;messages&quot;: 1, &quot;requested&quot;: 7, &quot;subscribers&quot;: 0, &quot;last_message_id&quot;: &quot;1450755421:0&quot; }</span>
</code></pre></div></p>
<p><strong><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>DELETE</code></strong> requests delete a channel and end all subscriber connections. Like the <code>GET</code> requests, this returns a <code>200</code> status response with channel info if the channel existed, and a <code>404</code> otherwise.</p>
<h3 id="how-channel-settings-work">How Channel Settings Work</h3>
<p><em>A channel's configuration is set to the that of its last-used publishing location.</em>
So, if you want a channel to behave consistently, and want to publish to it from multiple locations, <em>make sure those locations have the same configuration</em>.</p>
<p>You can also can use differently-configured publisher locations to dynamically update a channel's message buffer settings. This can be used to erase messages or to scale an existing channel's message buffer as desired.</p>
<h2 id="subscriber-endpoints">Subscriber Endpoints</h2>
<p>Subscriber endpoints are Nginx config <em>locations</em> with the <a href="#nchan_subscriber"><em><code>nchan_subscriber</code></em></a> directive.</p>
<p>Nchan supports several different kinds of subscribers for receiving messages: <a href="#websocket"><em>Websocket</em></a>, <a href="#eventsource"><em>EventSource</em></a> (Server Sent Events),  <a href="#long-polling"><em>Long-Poll</em></a>, <a href="#interval-polling"><em>Interval-Poll</em></a>. <a href="#http-chunked-transfer"><em><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> chunked transfer</em></a>, and <a href="#http-multipart-mixed"><em><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> multipart/mixed</em></a>.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/sub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#example subscriber location</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">foo</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_subscriber_first_message</span><span class="w"> </span><span class="s">oldest</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<!-- tag:subscriber -->

<ul>
<li>
<h3 id="long-polling">Long-Polling</h3>
<p>The tried-and-true server-push method supported by every browser out there.<br />
  Initiated by sending an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>GET</code> request to a channel subscriber endpoint.<br />
  The long-polling subscriber walks through a channel's message queue via the built-in cache mechanism of <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> clients, namely with the "<code>Last-Modified</code>" and "<code>Etag</code>" headers. Explicitly, to receive the next message for given a long-poll subscriber response, send a request with the "<code>If-Modified-Since</code>" header set to the previous response's "<code>Last-Modified</code>" header, and "<code>If-None-Match</code>" likewise set to the previous response's "<code>Etag</code>" header.<br />
  Sending a request without a "<code>If-Modified-Since</code>" or "<code>If-None-Match</code>" headers returns the oldest message in a channel's message queue, or waits until the next published message, depending on the value of the <code>nchan_subscriber_first_message</code> config directive.<br />
  A message's associated content type, if present, will be sent to this subscriber with the <code>Content-Type</code> header.
  <!-- tag:subscriber-longpoll -->
</p>
</li>
<li>
<h3 id="interval-polling">Interval-Polling</h3>
<p>Works just like long-polling, except if the requested message is not yet available, immediately responds with a <code>304 Not Modified</code>.
  Nchan cannot automatically distinguish between long-poll and interval-poll subscriber requests, so long-polling must be disabled for a subscriber location if you wish to use interval-polling.</p>
</li>
<li>
<h3 id="websocket">Websocket</h3>
<p>Bidirectional communication for web browsers. Part of the <a href="http://www.w3.org/TR/2014/REC-html5-20141028/single-page.html">HTML5 spec</a>. Nchan supports the latest protocol version 13 (<a href="https://tools.ietf.org/html/rfc6455">RFC 6455</a>).<br />
  Initiated by sending a websocket handshake to the desired subscriber endpoint location.<br />
  If the websocket connection is closed by the server, the <code>close</code> frame will contain the <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> response code and status line describing the reason for closing the connection. Server-initiated keep-alive pings can be configured with the <a href="#nchan_websocket_ping_interval"><code>nchan_websocket_ping_interval</code></a> config directive.
  Messages are delivered to subscribers in <code>text</code> websocket frames, except if a message's <code>content-type</code> is "<code>application/octet-stream</code>" -- then it is delivered in a <code>binary</code> frame.
  <br />
  Websocket subscribers can use the custom <code>ws+meta.nchan</code> subprotocol to receive message metadata with messages, making websocket connections resumable. Messages received with this subprotocol are of the form
<br />
<pre>
  id: message_id
  content-type: message_content_type
  \n
  message_data
  </pre></p>
</li>
</ul>
<p>The <code>content-type:</code> line may be omitted.
  <br />
  #### Websocket Publisher
  Messages published through a websocket connection can be forwarded to an upstream application with the <a href="#nchan_publisher_upstream_request"><code>nchan_publisher_upstream_request</code></a> config directive. <br />
  Messages published in a binary frame are automatically given the <code>content-type</code> "<code>application/octet-stream</code>".
  #### Permessage-deflate
  Nchan version 1.1.8 and above supports the <a href="https://tools.ietf.org/html/rfc7692">permessage-deflate protocol extension</a>. Messages are deflated once when they are published, and then can be broadcast to any number of compatible websocket subscribers. Message deflation is enabled by setting the <a href="#nchan_deflate_message_for_websocket"><code>nchan_deflate_message_for_websocket on;</code></a> directive in a publisher location.
  <br />
  The deflated data is stored alongside the original message in memory, or, if large enough, on disk. This means more <a href="#nchan_shared_memory_size">shared memory</a> is necessary when using <code>nchan_deflate_message_for_websocket</code>.
  <br />
  Deflation parameters (speed, memory use, strategy, etc.), can be tweaked using the <a href="#nchan_permessage_deflate_compression_window"><code>nchan_permessage_deflate_compression_window</code></a>, <a href="#nchan_permessage_deflate_compression_level"><code>nchan_permessage_deflate_compression_level</code></a>,
  <a href="#nchan_permessage_deflate_compression_strategy"><code>nchan_permessage_deflate_compression_strategy</code></a>, and 
  <a href="#nchan_permessage_deflate_compression_window"><code>nchan_permessage_deflate_compression_window</code></a> settings.
  <br />
  Nchan also supports the (deprecated) <a href="https://tools.ietf.org/html/draft-tyoshino-hybi-websocket-perframe-deflate-06">perframe-deflate extension</a> still in use by Safari as <code>x-webkit-perframe-deflate</code>.
  <br />
  <!-- tag:subscriber-websocket -->
</p>
<ul>
<li>
<h3 id="eventsource">EventSource</h3>
<p>Also known as <a href="https://en.wikipedia.org/wiki/Server-sent_events">Server-Sent Events</a> or SSE, it predates Websockets in the <a href="http://www.w3.org/TR/2014/REC-html5-20141028/single-page.html">HTML5 spec</a>, and is a <a href="http://www.w3.org/TR/eventsource/#event-stream-interpretation">very simple protocol</a>.<br />
  Initiated by sending an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>GET</code> request to a channel subscriber endpoint with the "<code>Accept: text/event-stream</code>" header.  <br />
  Each message <code>data:</code> segment will be prefaced by the message <code>id:</code>.<br />
  To resume a closed EventSource connection from the last-received message, one <em>should</em> start the connection with the "<code>Last-Event-ID</code>" header set to the last message's <code>id</code>.<br />
  Unfortunately, browsers <a href="http://www.w3.org/TR/2011/WD-eventsource-20111020/#concept-event-stream-last-event-id">don't support setting</a> this header for an <code>EventSource</code> object, so by default the last message id is set either from the "<code>Last-Event-Id</code>" header or the <code>last_event_id</code> url query string argument.<br />
  This behavior can be configured via the <a href="#nchan_subscriber_last_message_id"><code>nchan_subscriber_last_message_id</code></a> config.<br />
  A message's <code>content-type</code> will not be received by an EventSource subscriber, as the protocol makes no provisions for this metadata.
  A message's associated <code>event</code> type, if present, will be sent to this subscriber with the <code>event:</code> line.<br />
  <!-- tag:subscriber-eventsource -->
</p>
</li>
<li>
<h3 id="http-multipartmixed"><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <a href="http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html#z0">multipart/mixed</a></h3>
<p>The <code>multipart/mixed</code> MIMEtype was conceived for emails, but hey, why not use it for <abbr title="Hyper Text Transfer Protocol">HTTP</abbr>? It's easy to parse and includes metadata with each message.<br />
  Initiated by including an <code>Accept: multipart/mixed</code> header.<br />
  The response headers and the unused "preamble" portion of the response body are sent right away, with the boundary string generated randomly for each subscriber.  Each subsequent message will be sent as one part of the multipart message, and will include the message time and tag (<code>Last-Modified</code> and <code>Etag</code>) as well as the optional <code>Content-Type</code> headers.<br />
  Each message is terminated with the next multipart message's boundary <strong>without a trailing newline</strong>. While this conforms to the multipart spec, it is unusual as multipart messages are defined as <em>starting</em>, rather than ending with a boundary.<br />
  A message's associated content type, if present, will be sent to this subscriber with the <code>Content-Type</code> header.
  <!-- tag:subscriber-multipart -->
</p>
</li>
<li>
<h3 id="http-raw-stream"><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Raw Stream</h3>
<p>A simple subscription method similar to the <a href="https://github.com/wandenberg/nginx-push-stream-module/blob/master/docs/directives/subscribers.textile#push_stream_subscriber">streaming subscriber</a> of the <a href="https://github.com/wandenberg/nginx-push-stream-module">Nginx <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Push Stream Module</a>. Messages are appended to the response body, separated by a newline or configurable by <code>nchan_subscriber_http_raw_stream_separator</code>.
  <!-- tag:subscriber-rawstream -->
</p>
</li>
<li>
<h3 id="http-chunked-transfer"><abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1">Chunked Transfer</a></h3>
<p>This subscription method uses the <code>chunked</code> <code>Transfer-Encoding</code> to receive messages. <br />
  Initiated by explicitly including <code>chunked</code> in the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.39"><code>TE</code> header</a>:<br />
<code>TE: chunked</code> (or <code>TE: chunked;q=??</code> where the qval &gt; 0)<br />
  The response headers are sent right away, and each message will be sent as an individual chunk. Note that because a zero-length chunk terminates the transfer, <strong>zero-length messages will not be sent</strong> to the subscriber.<br />
  Unlike the other subscriber types, the <code>chunked</code> subscriber cannot be used with http/2 because it disallows chunked encoding.
  <!-- tag:subscriber-chunked -->
</p>
</li>
</ul>
<h2 id="pubsub-endpoint">PubSub Endpoint</h2>
<p>PubSub endpoints are Nginx config <em>locations</em> with the <a href="#nchan_pubsub"><em><code>nchan_pubsub</code></em></a> directive.</p>
<p>A combination of <em>publisher</em> and <em>subscriber</em> endpoints, this location treats all <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>GET</code>
requests as subscribers, and all <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>POST</code> as publishers. Channels cannot be deleted through a pubsub endpoing with an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>DELETE</code> request.</p>
<p>One simple use case is an echo server:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/pubsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">foo</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>A more interesting setup may set different publisher and subscriber channel ids:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/pubsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_publisher_channel_id</span><span class="w"> </span><span class="s">foo</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_subscriber_channel_id</span><span class="w"> </span><span class="s">bar</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>Here, subscribers will listen for messages on channel <code>foo</code>, and publishers will publish messages to channel <code>bar</code>. This can be useful when setting up websocket proxying between web clients and your application.</p>
<!-- tag:pubsub -->

<h2 id="the-channel-id">The Channel ID</h2>
<p>So far the examples have used static channel ids, which is not very useful. In practice, the channel id can be set to any nginx <em>variable</em>, such as a querystring argument, a header value, or a part of the location url:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/sub_by_ip</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#channel id is the subscriber&#39;s IP address</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/sub_by_querystring</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#channel id is the query string parameter chanid</span>
<span class="w">    </span><span class="c1"># GET /sub/sub_by_querystring?foo=bar&amp;chanid=baz will have the channel id set to &#39;baz&#39;</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$arg_chanid</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#channel id is the word after /sub/</span>
<span class="w">    </span><span class="c1"># GET /sub/foobar_baz will have the channel id set to &#39;foobar_baz&#39;</span>
<span class="w">    </span><span class="c1"># I hope you know your regular expressions...</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span><span class="w"> </span><span class="c1">#first capture of the location match</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>I recommend using the last option, a channel id derived from the request URL via a regular expression. It makes things nice and RESTful.</p>
<!-- tag:channel-id -->

<h3 id="channel-multiplexing">Channel Multiplexing</h3>
<p>With channel multiplexing, subscribers can subscribe to up to 255 channels per connection. Messages published to all the specified channels will be delivered in-order to the subscriber. There are two ways to enable multiplexing:</p>
<p>Up to 7 channel ids can be specified for the <code>nchan_channel_id</code> or <code>nchan_channel_subscriber_id</code> config directive:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/multisub/(\w+)/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$1&quot;</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$2&quot;</span><span class="w"> </span><span class="s">&quot;common_channel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#GET /multisub/foo/bar will be subscribed to:</span>
<span class="w">    </span><span class="c1"># channels &#39;foo&#39;, &#39;bar&#39;, and &#39;common_channel&#39;,</span>
<span class="w">    </span><span class="c1">#and will receive messages from all of the above.</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>For more than 7 channels, <code>nchan_channel_id_split_delimiter</code> can be used to split the <code>nchan_channel_id</code> or <code>nchan_channel_subscriber_id</code> into up to 255 individual channel ids:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/multisub-split/(.*)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id_split_delimiter</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#GET /multisub-split/foo,bar,baz,a will be subscribed to:</span>
<span class="w">    </span><span class="c1"># channels &#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, and &#39;a&#39;</span>
<span class="w">    </span><span class="c1">#and will receive messages from all of the above.</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>It is also possible to publish to multiple channels with a single request as well as delete multiple channels with a single request, with similar configuration:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/multipub/(\w+)/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$1&quot;</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$2&quot;</span><span class="w"> </span><span class="s">&quot;another_channel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#POST /multipub/foo/bar will publish to:</span>
<span class="w">    </span><span class="c1"># channels &#39;foo&#39;, &#39;bar&#39;, &#39;another_channel&#39;</span>
<span class="w">    </span><span class="c1">#DELETE /multipub/foo/bar will delete:</span>
<span class="w">    </span><span class="c1"># channels &#39;foo&#39;, &#39;bar&#39;, &#39;another_channel&#39;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>When a channel is deleted, all of its messages are deleted, and all of its subscribers' connection are closed -- including ones subscribing through a multiplexed location. For example, suppose a subscriber is subscribed to channels "foo" and "bar" via a single multiplexed connection. If "foo" is deleted, the connection is closed, and the subscriber therefore loses the "bar" subscription as well.</p>
<p>See the <a href="#securing-channels">Channel Security</a> section about using good IDs and keeping private channels secure.</p>
<!-- tag:channel-multiplexing -->

<h3 id="channel-groups">Channel Groups</h3>
<p>Channels can be associated with groups to avoid channel ID conflicts:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/test_pubsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/pubsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">&quot;production&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#same channel id, different channel group. Thus, different channel.</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/flexgroup_pubsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="nv">$arg_group</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#group can be set with request variables too</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<h4 id="limits-and-accounting">Limits and Accounting</h4>
<p>Groups can be used to track aggregate channel usage, as well as set limits on the number of channels, subscribers, stored messages, memory use, etc:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="c1">#enable group accounting</span>
<span class="w">  </span><span class="k">nchan_channel_group_accounting</span><span class="w"> </span><span class="no">on</span><span class="p">;</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pubsub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">&quot;limited&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/prelimited_pubsub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">&quot;limited&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_subscribers</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_messages_memory</span><span class="w"> </span><span class="s">50M</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/group</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">limited</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_location</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_channels</span><span class="w"> </span><span class="nv">$arg_max_channels</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_messages</span><span class="w"> </span><span class="nv">$arg_max_messages</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_messages_memory</span><span class="w"> </span><span class="nv">$arg_max_messages_mem</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_messages_disk</span><span class="w"> </span><span class="nv">$arg_max_messages_disk</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_group_max_subscribers</span><span class="w"> </span><span class="nv">$arg_max_subs</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>Here, <code>/group</code> is an <code>nchan_group_location</code>, which is used for accessing and modifying group data. To get group data, send a <code>GET</code> request to a <code>nchan_group_location</code>:</p>
<div class="highlight"><pre><span></span><code>&gt;<span class="w">  </span>curl<span class="w"> </span>http://localhost/group

channels:<span class="w"> </span><span class="m">10</span>
subscribers:<span class="w"> </span><span class="m">0</span>
messages:<span class="w"> </span><span class="m">219</span>
shared<span class="w"> </span>memory<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>messages:<span class="w"> </span><span class="m">42362</span><span class="w"> </span>bytes
disk<span class="w"> </span>space<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>messages:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes
limits:
<span class="w">  </span>max<span class="w"> </span>channels:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>subscribers:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>messages:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>messages<span class="w"> </span>shared<span class="w"> </span>memory:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>messages<span class="w"> </span>disk<span class="w"> </span>space:<span class="w"> </span><span class="m">0</span><span class="w">  </span>
</code></pre></div>
<p>By default, the data is returned in human-readable plaintext, but can also be formatted as JSON, XML, or YAML:</p>
<div class="highlight"><pre><span></span><code>&gt;<span class="w">  </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Accept: text/json&quot;</span><span class="w"> </span>http://localhost/group

<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;channels&quot;</span>:<span class="w"> </span><span class="m">21</span>,
<span class="w">  </span><span class="s2">&quot;subscribers&quot;</span>:<span class="w"> </span><span class="m">40</span>,
<span class="w">  </span><span class="s2">&quot;messages&quot;</span>:<span class="w"> </span><span class="m">53</span>,
<span class="w">  </span><span class="s2">&quot;messages_memory&quot;</span>:<span class="w"> </span><span class="m">19941</span>,
<span class="w">  </span><span class="s2">&quot;messages_disk&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">  </span><span class="s2">&quot;limits&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;channels&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">    </span><span class="s2">&quot;subscribers&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">    </span><span class="s2">&quot;messages&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">    </span><span class="s2">&quot;messages_memory&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">    </span><span class="s2">&quot;messages_disk&quot;</span>:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The data in the response are for the single Nchan instance only, regardless of whether Redis is used. A limit of 0 means 'unlimited'.</p>
<p>Limits can be set per-location, as with the above <code>/prelimited_pubsub/...</code> location, or with a POST request to the <code>nchan_group_location</code>:
<div class="highlight"><pre><span></span><code>&gt;<span class="w">  </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost/group?max_channels=15&amp;max_subs=1000&amp;max_messages_disk=0.5G&quot;</span>

channels:<span class="w"> </span><span class="m">0</span>
subscribers:<span class="w"> </span><span class="m">0</span>
messages:<span class="w"> </span><span class="m">0</span>
shared<span class="w"> </span>memory<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>messages:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes
disk<span class="w"> </span>space<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>messages:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes
limits:
<span class="w">  </span>max<span class="w"> </span>channels:<span class="w"> </span><span class="m">15</span>
<span class="w">  </span>max<span class="w"> </span>subscribers:<span class="w"> </span><span class="m">1000</span>
<span class="w">  </span>max<span class="w"> </span>messages:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>messages<span class="w"> </span>shared<span class="w"> </span>memory:<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>max<span class="w"> </span>messages<span class="w"> </span>disk<span class="w"> </span>space:<span class="w"> </span><span class="m">536870912</span>
</code></pre></div></p>
<p>Limits are only applied locally, regardless of whether Redis is enabled. 
If a publisher or subscriber request exceeds a group limit, Nchan will respond to it with a <code>403 Forbidden</code> response.</p>
<!-- tag:group -->

<h2 id="hooks-and-callbacks">Hooks and Callbacks</h2>
<!-- tag:hook -->

<h3 id="request-authorization">Request Authorization</h3>
<p>This feature, configured with <a href="#nchan_authorize_request"><code>nchan_authorize_request</code></a>, behaves just like the Nginx <a href="http://nginx.org/en/docs/http/ngx_http_auth_request_module.html#auth_request_set">http_auth_request module</a>.</p>
<p>Consider the configuration:
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">upstream</span><span class="w"> </span><span class="s">my_app</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">server</span><span class="w"> </span><span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/auth</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://my_app/pubsub_authorize</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_pass_request_body</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Content-Length</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Subscriber-Type</span><span class="w"> </span><span class="nv">$nchan_subscriber_type</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Publisher-Type</span><span class="w"> </span><span class="nv">$nchan_publisher_type</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Prev-Message-Id</span><span class="w"> </span><span class="nv">$nchan_prev_message_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Channel-Id</span><span class="w"> </span><span class="nv">$nchan_channel_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Original-URI</span><span class="w"> </span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pubsub/auth/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_authorize_request</span><span class="w"> </span><span class="s">/auth</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></p>
<p>Here, any request to the location <code>/pubsub/auth/&lt;...&gt;</code> will need to be authorized by your application (<code>my_app</code>). Nginx will generate a <code>GET /pubsub_authorize</code> request to the application, with additional headers set by the <code>proxy_set_header</code> directives. Note that Nchan-specific variables are available for this authorization request. Once your application receives this request, it should decide whether or not to authorize the subscriber. This can be done based on a forwarded session cookie, IP address, or any set of parameters of your choosing. If authorized, it should respond with an empty <code>200 OK</code> response.<br />
All non-<code>2xx</code> response codes (such as <code>403 Forbidden</code>) are interpreted as authorization failures. In this case, the failing response is proxied to the client. </p>
<p>Note that Websocket and EventSource clients will only try to authorize during the initial handshake request, whereas Long-Poll and Interval-Poll subscribers will need to be authorized each time they request the next message, which may flood your application with too many authorization requests.</p>
<!-- commands: nchan_authorize_request -->

<h3 id="subscriber-presence">Subscriber Presence</h3>
<p>Subscribers can notify an application when they have subscribed and unsubscribed to a channel using the <a href="#nchan_subscribe_request"><code>nchan_subscribe_request</code></a>
and <a href="#nchan_unsubscribe_request"><code>nchan_unsubscribe_request</code></a> settings. 
These should point to Nginx locations configured to forward requests to an upstream proxy (your application):</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_subscribe_request</span><span class="w"> </span><span class="s">/upstream/sub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_unsubscribe_request</span><span class="w"> </span><span class="s">/upstream/unsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/upstream/unsub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://127.0.0.1:9292/unsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_ignore_client_abort</span><span class="w"> </span><span class="no">on</span><span class="p">;</span><span class="w">  </span><span class="c1">#!!!important!!!!</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Subscriber-Type</span><span class="w"> </span><span class="nv">$nchan_subscriber_type</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Channel-Id</span><span class="w"> </span><span class="nv">$nchan_channel_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Original-URI</span><span class="w"> </span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span>
<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/upstream/sub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://127.0.0.1:9292/sub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Subscriber-Type</span><span class="w"> </span><span class="nv">$nchan_subscriber_type</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Message-Id</span><span class="w"> </span><span class="nv">$nchan_message_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Channel-Id</span><span class="w"> </span><span class="nv">$nchan_channel_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Original-URI</span><span class="w"> </span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span>
</code></pre></div>
<p>In order for <code>nchan_unsubscribe_request</code> to work correctly, the location it points to must have <code>proxy_ignore_client_abort on;</code>. Otherwise, suddenly aborted subscribers may not trigger an unsubscribe request.</p>
<p>Note that the subscribe/unsubscribe hooks are <strong>disabled for long-poll and interval-poll clients</strong>, because they would trigger these hooks each time they receive a message.</p>
<!-- commands: nchan_subscribe_request nchan_unsubscribe_request -->

<h3 id="message-forwarding">Message Forwarding</h3>
<p>Messages can be forwarded to an upstream application before being published using the <code>nchan_publisher_upstream_request</code> setting:</p>
<p><div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#publisher endpoint</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_publisher_upstream_request</span><span class="w"> </span><span class="s">/upstream_pub</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/upstream_pub</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://127.0.0.1:9292/pub</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Publisher-Type</span><span class="w"> </span><span class="nv">$nchan_publisher_type</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Prev-Message-Id</span><span class="w"> </span><span class="nv">$nchan_prev_message_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Channel-Id</span><span class="w"> </span><span class="nv">$nchan_channel_id</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Original-URI</span><span class="w"> </span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span>
</code></pre></div>
With this configuration, incoming messages are first <code>POST</code>ed to <code>http://127.0.0.1:9292/pub</code>.
The upstream response code determines how publishing will proceed:
  - <code>304 Not Modified</code> publishes the message as received, without modifification.
  - <code>204 No Content</code> discards the message
  - <code>200 OK</code> is used for modifying the message. Instead of the original incoming message, the message contained in this <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> response is published.</p>
<p>There are two main use cases for <code>nchan_publisher_upstream_request</code>: forwarding incoming data from Websocket publishers to an application, and mutating incoming messages.</p>
<!-- commands: nchan_publisher_upstream_request -->

<h2 id="storage">Storage</h2>
<p>Nchan can stores messages in memory, on disk, or via Redis. Memory storage is much faster, whereas Redis has additional overhead as is considerably slower for publishing messages, but offers near unlimited scalability for broadcast use cases with far more subscribers than publishers.</p>
<h3 id="memory-storage">Memory Storage</h3>
<p>This default storage method uses a segment of shared memory to store messages and channel data. Large messages as determined by Nginx's caching layer are stored on-disk. The size of the memory segment is configured with <code>nchan_shared_memory_size</code>. Data stored here is not persistent, and is lost if Nginx is restarted or reloaded.</p>
<!-- tag:memstore -->

<h3 id="redis">Redis</h3>
<p><a href="http://redis.io">Redis</a> can be used to add <strong>data persistence</strong> and <strong>horizontal scalability</strong>, <strong>failover</strong> and <strong>high availability</strong> to your Nchan setup. </p>
<!-- tag:redis -->

<h4 id="connecting-to-a-redis-server">Connecting to a Redis Server</h4>
<p>To connect to a single Redis master server, use an <code>upstream</code> with <code>nchan_redis_server</code> and <code>nchan_redis_pass</code> settings:</p>
<div class="highlight"><pre><span></span><code><span class="k">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">upstream</span><span class="w"> </span><span class="s">my_redis_server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_redis_server</span><span class="w"> </span><span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/redis_sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_redis_pass</span><span class="w"> </span><span class="s">my_redis_server</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/redis_pub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_redis_pass</span><span class="w"> </span><span class="s">my_redis_server</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<p>All servers with the above configuration connecting to the same redis server share channel and message data.</p>
<p>Channels that don't use Redis can be configured side-by-side with Redis-backed channels, provided the endpoints never overlap. (This can be ensured, as above, by setting separate <code>nchan_channel_group</code>s.). Different locations can also connect to different Redis servers.</p>
<p>Nchan can work with a single Redis master. It can also auto-discover and use Redis slaves to balance PUBSUB traffic.</p>
<!-- commands: nchan_redis_server nchan_redis_pass -->

<h4 id="redis-cluster">Redis Cluster</h4>
<p>Nchan also supports using Redis Cluster, which adds scalability via sharding channels among cluster nodes. Redis cluster also provides <strong>automatic failover</strong>, <strong>high availability</strong>, and eliminates the single point of failure of one shared Redis server. It is configured and used like so:</p>
<div class="highlight"><pre><span></span><code><span class="k">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">upstream</span><span class="w"> </span><span class="s">redis_cluster</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_redis_server</span><span class="w"> </span><span class="s">redis://127.0.0.1:7000</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_redis_server</span><span class="w"> </span><span class="s">redis://127.0.0.1:7001</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_redis_server</span><span class="w"> </span><span class="s">redis://127.0.0.1:7002</span><span class="p">;</span>
<span class="w">    </span><span class="c1"># you don&#39;t need to specify all the nodes, they will be autodiscovered</span>
<span class="w">    </span><span class="c1"># however, it&#39;s recommended that you do specify at least a few master nodes.</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_redis_pass</span><span class="w"> </span><span class="s">redis_cluster</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_redis_pass</span><span class="w"> </span><span class="s">redis_cluster</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<!-- commands: nchan_redis_server nchan_redis_pass -->

<h5 id="high-availability">High Availability</h5>
<p>Redis Cluster connections are designed to be resilient and try to recover from errors. Interrupted connections will have their commands queued until reconnection, and Nchan will publish any messages it successfully received while disconnected. Nchan is also adaptive to cluster modifications. It will add new nodes and remove them as needed.</p>
<p>All Nchan servers sharing a Redis server or cluster should have their times synchronized (via ntpd or your favorite ntp daemon). Failure to do so may result in missed or duplicate messages.</p>
<h5 id="failover-recovery">Failover Recovery</h5>
<p>Starting with version 1.3.0, Nchan will attempt to recover from cluster node failures, keyslot errors, and cluster epoch changes without disconnecting from the entire cluster. It will attempt to do this until <a href="#nchan_redis_cluster_max_failing_time"><code>nchan_redis_cluster_max_failing_time</code></a> is exceeded. Additionally, <a href="#nchan_redis_cluster_recovery_delay">recovery attempt delays</a> have configurable <a href="#nchan_redis_cluster_recovery_delay_jitter">jitter</a>, <a href="#nchan_redis_cluster_recovery_delay_backoff">exponential backoff</a>, and <a href="#nchan_redis_cluster_recovery_delay_max">maximum</a> values.</p>
<h4 id="using-redis-securely">Using Redis securely</h4>
<p>Redis servers can be connected to via TLS by using the <a href="#nchan_redis_ssl"><code>nchan_redis_ssl</code></a> config setting in an <code>upstream</code> block, or by using the <code>rediss://</code>  schema for the server URLs.</p>
<p>A password and optional username for the <code>AUTH</code> command can be set by the <a href="#nchan_redis_username"><code>nchan_redis_username</code></a> and <a href="#nchan_redis_password"><code>nchan_redis_password</code></a> config settings in an <code>upstream</code> block, or by using the <code>redis://&lt;username&gt;:&lt;password&gt;@hostname</code> server URL schema.</p>
<p>Note that autodiscovered Redis nodes inherit their parent's SSL, username, and password settings.</p>
<h4 id="tweaks-and-optimizations">Tweaks and Optimizations</h4>
<p>As of version 1.2.0, Nchan uses Redis slaves to load-balance PUBSUB traffic. By default, there is an equal chance that a channel's PUBSUB subscription will go to any master or slave. The <a href="#nchan_redis_subscribe_weights"><code>nchan_redis_subscribe_weights</code></a> setting is available to fine-tune this load-balancing.</p>
<p>Also from 1.2.0 onward, <a href="#nchan_redis_optimize_target"><code>nchan_redis_optimize_target</code></a> can be used to prefer optimizing Redis slaves for CPU or bandwidth. For heavy publishing loads, the tradeoff is very roughly 35% replication bandwidth per slave to 30% CPU load on slaves.</p>
<h4 id="performance-statistics">Performance Statistics</h4>
<p>Redis command statistics were added in version 1.3.5. These provide total number of times different Redis commands were run on, and the total amount of time they took. The stats are for a given Nchan server, <em>not</em> all servers connected to a Redis upstream. They are grouped by each upstream, and totaled per node.</p>
<div class="highlight"><pre><span></span><code><span class="k">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">upstream</span><span class="w"> </span><span class="s">my_redis_cluster</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_redis_server</span><span class="w"> </span><span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#[...]</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/nchan_redis_cluster_stats$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_redis_upstream_stats</span><span class="w"> </span><span class="s">my_redis_cluster</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>To get the stats, send a GET request to the stats location.</p>
<div class="highlight"><pre><span></span><code><span class="go">  curl http://localhost/nchan_redis_cluster_stats</span>
</code></pre></div>
<p>The response is JSON of the form:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;upstream&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;redis_cluster&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;nodes&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;address&quot;</span><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1:7000&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="w">             </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;f13d71b1d14d8bf92b72cebee61421294e95dc72&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;command_totals&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;connect&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">357</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="s2">&quot;pubsub_subscribe&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">749</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">37</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="s2">&quot;pubsub_unsubsribe&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">332</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">37</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="cm">/*[...]*/</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;address&quot;</span><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1:7001&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="w">             </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;b768ecb4152912bed6dc927e8f70284191a79ed7&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;command_totals&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;connect&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">4281</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="s2">&quot;pubsub_subscribe&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">309</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">33</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="s2">&quot;pubsub_unsubsribe&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;msec&quot;</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="mf">307</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;times&quot;</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="mf">30</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="cm">/*[...]*/</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/*[...]*/</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>For brevity, the entire <code>command_totals</code> hash is omitted in this documentation.</p>
<!-- commands: nchan_redis_upstream_stats nchan_redis_upstream_stats_disconnected_timeout nchan_redis_upstream_stats_enabled -->

<h2 id="introspection">Introspection</h2>
<p>There are several ways to see what's happening inside Nchan. These are useful for debugging application integration and for measuring performance.</p>
<h3 id="channel-events">Channel Events</h3>
<p>Channel events are messages automatically published by Nchan when certain events occur in a channel. These are very useful for debugging the use of channels. However, they carry a significant performance overhead and should be used during development, and not in production.</p>
<p>Channel events are published to special 'meta' channels associated with normal channels. Here's how to configure them:</p>
<div class="highlight"><pre><span></span><code><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pubsub/(.+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">nchan_pubsub</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_channel_events_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span><span class="w"> </span><span class="c1">#enables channel events for this location</span>
<span class="p">}</span>

<span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/channel_events/(.+)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">#channel events subscriber location</span>
<span class="w">  </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">meta</span><span class="p">;</span><span class="w"> </span><span class="c1">#&quot;meta&quot; is a SPECIAL channel group</span>
<span class="w">  </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Note the <code>/channel_events/...</code> location has a <em>special</em> <code>nchan_channel_group</code>, <code>meta</code>. This group is reserved for accessing "channel events channels", or"metachannels".</p>
<p>Now, say I subscribe to <code>/channel_events/foo</code> I will refer to this as the channel events subscriber.</p>
<p>Let's see what this channel events subscriber receives when I publish messages to </p>
<p>Subscribing to <code>/pubsub/foo</code> produces the channel event
<div class="highlight"><pre><span></span><code>subscriber_enqueue foo
</code></pre></div></p>
<p>Publishing a message to <code>/pubsub/foo</code>:
<div class="highlight"><pre><span></span><code>channel_publish foo
</code></pre></div></p>
<p>Unsubscribing from <code>/pubsub/foo</code>:
<div class="highlight"><pre><span></span><code>subscriber_dequeue foo
</code></pre></div></p>
<p>Deleting <code>/pubsub/foo</code> (with <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> <code>DELETE /pubsub/foo</code>):
<div class="highlight"><pre><span></span><code>channel_delete foo
</code></pre></div></p>
<p>The event string itself is configirable with <a href="#nchan_channel_event_string">nchan_channel_event_string</a>. By default, it is set to <code>$nchan_channel_event $nchan_channel_id</code>. 
This string can use any Nginx and <a href="/#variables">Nchan variables</a>.</p>
<h3 id="nchan_stub_status-stats">nchan_stub_status Stats</h3>
<p>Like Nginx's <a href="https://nginx.org/en/docs/http/ngx_http_stub_status_module.html">stub_status</a>,
<code>nchan_stub_status</code> is used to get performance metrics.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">location</span><span class="w"> </span><span class="s">/nchan_stub_status</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">nchan_stub_status</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>Sending a GET request to this location produces the response:</p>
<div class="highlight"><pre><span></span><code>total published messages: 1906
stored messages: 1249
shared memory used: 1824K
channels: 80
subscribers: 90
redis pending commands: 0
redis connected servers: 0
redis unhealthy upstreams: 0
total redis commands sent: 0
total interprocess alerts received: 1059634
interprocess alerts in transit: 0
interprocess queued alerts: 0
total interprocess send delay: 0
total interprocess receive delay: 0
nchan version: 1.1.5
</code></pre></div>
<p>Here's what each line means, and how to interpret it:
  - <code>total published messages</code>: Number of messages published to all channels through this Nchan server.
  - <code>stored messages</code>: Number of messages currently buffered in memory
  - <code>shared memory used</code>: Total shared memory used for buffering messages, storing channel information, and other purposes. This value should be comfortably below <code>nchan_shared_memory_size</code>.
  - <code>channels</code>: Number of channels present on this Nchan server.
  - <code>subscribers</code>: Number of subscribers to all channels on this Nchan server.
  - <code>redis pending commands</code>: Number of commands sent to Redis that are awaiting a reply. May spike during high load, especially if the Redis server is overloaded. Should tend towards 0.
  - <code>redis connected servers</code>: Number of redis servers to which Nchan is currently connected.
  - <code>redis unhealthy upstreams</code>: Number of redis upstreams (individual server or cluster mode) that are currently not usable for publishing and subscribing.
  - <code>total redis commands sent</code>: Total number of commands this Nchan instance sent to Redis.
  - <code>total interprocess alerts received</code>: Number of interprocess communication packets transmitted between Nginx workers processes for Nchan. Can grow at 100-10000 per second at high load.
  - <code>interprocess alerts in transit</code>: Number of interprocess communication packets in transit between Nginx workers. May be nonzero during high load, but should always tend toward 0 over time.
  - <code>interprocess queued alerts</code>: Number of interprocess communication packets waiting to be sent. May be nonzero during high load, but should always tend toward 0 over time.
  - <code>total interprocess send delay</code>: Total amount of time interprocess communication packets spend being queued if delayed. May increase during high load.
  - <code>total interprocess receive delay</code>: Total amount of time interprocess communication packets spend in transit if delayed. May increase during high load.
  - <code>nchan_version</code>: current version of Nchan. Available for version 1.1.5 and above.</p>
<p>Additionally, when there is at least one <code>nchan_stub_status</code> location, this data is also available <a href="#variables">through variables</a>.</p>
<h2 id="securing-channels">Securing Channels</h2>
<h3 id="securing-publisher-endpoints">Securing Publisher Endpoints</h3>
<p>Consider the use case of an application where authenticated users each use a private, dedicated channel for live updates. The configuration might look like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#available only on localhost</span>
<span class="w">    </span><span class="kn">listen</span><span class="w">  </span><span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">my_app_group</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#available to the world</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">my_app_group</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here, the subscriber endpoint is available on a public-facing port 80, and the publisher endpoint is only available on localhost, so can be accessed only by applications residing on that machine. Another way to limit access to the publisher endpoint is by using the allow/deny settings:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#available to the world</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/pub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">allow</span><span class="w"> </span><span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>
<span class="w">      </span><span class="kn">deny</span><span class="w"> </span><span class="s">all</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">my_app_group</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Here, only the local IP 127.0.0.1 is allowed to use the publisher location, even though it is defined in a non-localhost server block.</p>
<h3 id="keeping-a-channel-private">Keeping a Channel Private</h3>
<p>A Channel ID that is meant to be private should be treated with the same care as a session ID token. Considering the above use case of one-channel-per-user, how can we ensure that only the authenticated user, and no one else, is able to access his channel? </p>
<p>First, if you intend on securing the channel contents, you must use TLS/SSL:</p>
<div class="highlight"><pre><span></span><code><span class="k">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#available only on localhost</span>
<span class="w">    </span><span class="kn">listen</span><span class="w">  </span><span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#...publisher endpoint config</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#available to the world</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
<span class="w">    </span><span class="c1">#SSL config goes here</span>
<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">my_app_group</span><span class="p">;</span>
<span class="w">      </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now that you have a secure connection between the subscriber client and the server, you don't need to worry about the channel ID or messages being passively intercepted. This is a minimum requirement for secure message delivery, but it is not sufficient. </p>
<p>You must also take care to do at least one of the following:
  - <a href="#good-ids">Generate good, high-entropy Channel IDs</a>.
  - <a href="#request-authorization">Authorize all subscribers with the <code>nchan_authorize_request</code> config directive</a>.
  - <a href="#x-accel-redirect">Authorize subscribers and hide channel IDs with the "<code>X-Accel-Redirect</code>" mechanism</a>.</p>
<h4 id="good-ids">Good IDs</h4>
<p>An ID that can be guessed is an ID that can be hijacked. If you are not authenticating subscribers (as described below), a channel ID should be impossible to guess. Use at least 128 bits of entropy to generate a random token, associate it with the authenticated user, and share it only with the user's client. Do not reuse tokens, just as you would not reuse session IDs.</p>
<h4 id="x-accel-redirect">X-Accel-Redirect</h4>
<p>This feature uses the <a href="https://www.nginx.com/resources/wiki/start/topics/examples/x-accel">X-Accel feature</a> of Nginx upstream proxies to perform an internal request to a subscriber endpoint.
It allows a subscriber client to be authenticated by your application, and then redirected by nginx internally to a location chosen by your application (such as a publisher or subscriber endpoint). This makes it possible to have securely authenticated clients that are unaware of the channel id they are subscribed to.</p>
<p>Consider the following configuration:
<div class="highlight"><pre><span></span><code><span class="k">upstream</span><span class="w"> </span><span class="s">upstream_app</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">server</span><span class="w"> </span><span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span><span class="w"> </span>

<span class="w">  </span><span class="kn">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/sub_upstream</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://upstream_app/subscriber_x_accel_redirect</span><span class="p">;</span>
<span class="w">    </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/internal/(\w+)$</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">internal</span><span class="p">;</span><span class="w"> </span><span class="c1">#this location only accessible for internal nginx redirects</span>
<span class="w">    </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">nchan_channel_group</span><span class="w"> </span><span class="s">test</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>As commented, <code>/sub/internal/</code> is inaccessible from the outside:
<div class="highlight"><pre><span></span><code><span class="go">&gt; curl  -v  http://127.0.0.1/sub/internal/foo</span>

<span class="go">  &lt; HTTP/1.1 404 Not Found</span>
<span class="go">  &lt; Server: nginx/1.9.5</span>
<span class="go">  &lt;</span>
<span class="go">  &lt;html&gt;</span>
<span class="go">  &lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;</span>
<span class="go">  &lt;body bgcolor=&quot;white&quot;&gt;</span>
<span class="go">  &lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;</span>
<span class="go">  &lt;hr&gt;&lt;center&gt;nginx/1.9.5&lt;/center&gt;</span>
<span class="go">  &lt;/body&gt;</span>
<span class="go">  &lt;/html&gt;</span>
</code></pre></div></p>
<p>But if a request is made to <code>/sub_upstream</code>, it gets forwarded to your application (<code>my_app</code>) on port 8080 with the url <code>/subscriber_x_accel_redirect</code>.
Note that you can set any forwarded headers here like any <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass"><code>proxy_pass</code></a> Nginx location, 
but unlike the case with <code>nchan_authorize_request</code>, Nchan-specific variables are not available.</p>
<p>Now, your application must be set up to handle the request to <code>/subscriber_x_accel_redirect</code>. You should make sure the client is properly authenticated (maybe using a session cookie), and generate an associated channel id. If authentication fails, respond with a normal <code>403 Forbidden</code> response. You can also pass extra information about the failure in the response body and headers.</p>
<p>If your application successfully authenticates the subscriber request, you now need to instruct Nginx to issue an internal redirect to <code>/sub/internal/my_channel_id</code>.
This is accomplished by responding with an empty <code>200 OK</code> response that includes two headers:
- <code>X-Accel-Redirect: /sub/internal/my_channel_id</code>
- <code>X-Accel-Buffering: no</code></p>
<p>In the presence of these headers, Nginx will not forward your app's response to the client, and instead will <em>internally</em> redirect to <code>/sub/internal/my_channel_id</code>. 
This will behave as if the client had requested the subscriber endpoint location directly.</p>
<p>Thus using X-Accel-Redirect it is possible to both authenticate all subscribers <em>and</em> keep channel IDs completely hidden from subscribers.</p>
<p>This method is especially useful for EventSource and Websocket subscribers. Long-Polling subscribers will need to be re-authenticated for every new message, which may flood your application with too many authentication requests.</p>
<h3 id="revoking-channel-authorization">Revoking Channel Authorization</h3>
<p>In some cases, you may want to revoke a particular subscriber's authorization for a given channel (e.g., if the user's permissions are changed). If the channel is unique to the subscriber, this is simply accomplished by deleting the channel. The same can be achieved for shared channels by subscribing each subscriber to both the shared channel and a subscriber-specific channel via a multiplexed connection. Deleting the subscriber-specific channel will terminate the subscriber''s connection, thereby also terminating their subscription to the shared channel. Consider the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="k">location</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="sr">/sub/(\w+)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">nchan_subscriber</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">shared_</span><span class="nv">$1</span><span class="w"> </span><span class="s">user_</span><span class="nv">$arg_userid</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_authorize_request</span><span class="w"> </span><span class="s">/authorize</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span><span class="w"> </span><span class="s">/pub/user</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kn">nchan_publisher</span><span class="p">;</span>
<span class="w">  </span><span class="kn">nchan_channel_id</span><span class="w"> </span><span class="s">user_</span><span class="nv">$arg_userid</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>A request to <code>/sub/foo?userid=1234</code> will subscribe to channels "shared_foo" and "user_1234" via a multiplexed connection. If you later send a <code>DELETE</code> request to <code>/pub/user?userid=1234</code>, this subscriber will be disconnected and therefore unsubscribed from both "user_1234" and "shared_foo".</p>
<h2 id="variables">Variables</h2>
<p>Nchan makes several variables usabled in the config file:</p>
<ul>
<li>
<p><code>$nchan_channel_id</code><br />
  The channel id extracted from a publisher or subscriber location request. For multiplexed locations, this is the first channel id in the list.</p>
</li>
<li>
<p><code>$nchan_channel_id1</code>, <code>$nchan_channel_id2</code>, <code>$nchan_channel_id3</code>, <code>$nchan_channel_id4</code><br />
  As above, but for the nth channel id in multiplexed channels.</p>
</li>
<li>
<p><code>$nchan_subscriber_type</code><br />
  For subscriber locations, this variable is set to the subscriber type (websocket, longpoll, etc.).</p>
</li>
<li>
<p><code>$nchan_channel_subscriber_last_seen</code><br />
  For publisher locations, this variable is set to the timestamp for the last connected subscriber.</p>
</li>
<li>
<p><code>$nchan_channel_subscriber_count</code><br />
  For publisher locations, this variable is set to the number of subscribers in the published channel.</p>
</li>
<li>
<p><code>$nchan_channel_message_count</code><br />
  For publisher locations, this variable is set to the number of messages buffered in the published channel.</p>
</li>
<li>
<p><code>$nchan_publisher_type</code><br />
  For publisher locations, this variable is set to the subscriber type (http or websocket).</p>
</li>
<li>
<p><code>$nchan_prev_message_id</code>, <code>$nchan_message_id</code><br />
  The current and previous (if applicable) message id for publisher request or subscriber response.</p>
</li>
<li>
<p><code>$nchan_channel_event</code><br />
  For channel events, this is the event name. Useful when configuring <code>nchan_channel_event_string</code>.</p>
</li>
<li>
<p><code>$nchan_version</code><br />
  Current Nchan version. Available since 1.1.5.</p>
</li>
</ul>
<p>Additionally, <code>nchan_stub_status</code> data is also exposed as variables. These are available only when <code>nchan_stub_status</code> is enabled on at least one location:</p>
<ul>
<li><code>$nchan_stub_status_total_published_messages</code>  </li>
<li><code>$nchan_stub_status_stored_messages</code>  </li>
<li><code>$nchan_stub_status_shared_memory_used</code>  </li>
<li><code>$nchan_stub_status_channels</code>  </li>
<li><code>$nchan_stub_status_subscribers</code>  </li>
<li><code>$nchan_stub_status_redis_pending_commands</code>  </li>
<li><code>$nchan_stub_status_redis_connected_servers</code>  </li>
<li><code>$nchan_stub_status_redis_unhealthy_upstreams</code>  </li>
<li><code>$nchan_stub_status_total_ipc_alerts_received</code>  </li>
<li><code>$nchan_stub_status_ipc_queued_alerts</code>  </li>
<li><code>$nchan_stub_status_total_ipc_send_delay</code>  </li>
<li><code>$nchan_stub_status_total_ipc_receive_delay</code>  </li>
</ul>
<h2 id="configuration-directives">Configuration Directives</h2>
<ul>
<li>
<p><strong>nchan_channel_id</strong><br />
  arguments: 1 - 7<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Channel id for a publisher or subscriber location. Can have up to 4 values to subscribe to up to 4 channels.  <br />
<a href="#the-channel-id">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_id_split_delimiter</strong><br />
  arguments: 1<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Split the channel id into several ids for multiplexing using the delimiter string provided.  <br />
<a href="#channel-multiplexing">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_deflate_message_for_websocket</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: server, location  </p>
<blockquote>
<p>Store a compressed (deflated) copy of the message along with the original to be sent to websocket clients supporting the permessage-deflate protocol extension    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_eventsource_event</strong><br />
  arguments: 1<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Set the EventSource <code>event:</code> line to this value. When used in a publisher location, overrides the published message's <code>X-EventSource-Event</code> header and associates the message with the given value. When used in a subscriber location, overrides all messages' associated <code>event:</code> string with the given value.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_eventsource_ping_comment</strong><br />
  arguments: 1<br />
  default: <code>(empty)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Set the EventSource comment <code>: ...</code> line for periodic pings from server to client. Newlines are not allowed. If empty, no comment is sent with the ping.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_eventsource_ping_data</strong><br />
  arguments: 1<br />
  default: <code>(empty)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Set the EventSource <code>data:</code> line for periodic pings from server to client. Newlines are not allowed. If empty, no data is sent with the ping.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_eventsource_ping_event</strong><br />
  arguments: 1<br />
  default: <code>ping</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Set the EventSource <code>event:</code> line for periodic pings from server to client. Newlines are not allowed. If empty, no event type is sent with the ping.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_eventsource_ping_interval</strong> <code>&lt;number&gt; (seconds)</code><br />
  arguments: 1<br />
  default: <code>0 (none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Interval for sending ping messages to EventSource subscribers. Disabled by default.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_longpoll_multipart_response</strong> <code>[ off | on | raw ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: server, location, if  </p>
<blockquote>
<p>when set to 'on', enable sending multiple messages in a single longpoll response, separated using the multipart/mixed content-type scheme. If there is only one available message in response to a long-poll request, it is sent unmodified. This is useful for high-latency long-polling connections as a way to minimize round-trips to the server. When set to 'raw', sends multiple messages using the http-raw-stream message separator.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_permessage_deflate_compression_level</strong> <code>[ 0-9 ]</code><br />
  arguments: 1<br />
  default: <code>6</code><br />
  context: http  </p>
<blockquote>
<p>Compression level for the <code>deflate</code> algorithm used in websocket's permessage-deflate extension. 0: no compression, 1: fastest, worst, 9: slowest, best    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_permessage_deflate_compression_memlevel</strong> <code>[ 1-9 ]</code><br />
  arguments: 1<br />
  default: <code>8</code><br />
  context: http  </p>
<blockquote>
<p>Memory level for the <code>deflate</code> algorithm used in websocket's permessage-deflate extension. How much memory should be allocated for the internal compression state. 1 - minimum memory, slow and reduces compression ratio; 9 - maximum memory for optimal speed    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_permessage_deflate_compression_strategy</strong> <code>[ default | filtered | huffman-only | rle | fixed ]</code><br />
  arguments: 1<br />
  default: <code>default</code><br />
  context: http  </p>
<blockquote>
<p>Compression strategy for the <code>deflate</code> algorithm used in websocket's permessage-deflate extension. Use 'default' for normal data, For details see <a href="http://zlib.net/manual.html#Advanced">zlib's section on copression strategies</a>    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_permessage_deflate_compression_window</strong> <code>[ 9-15 ]</code><br />
  arguments: 1<br />
  default: <code>10</code><br />
  context: http  </p>
<blockquote>
<p>Compression window for the <code>deflate</code> algorithm used in websocket's permessage-deflate extension. The base two logarithm of the window size (the size of the history buffer). The bigger the window, the better the compression, but the more memory used by the compressor.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_publisher</strong> <code>[ http | websocket ]</code><br />
  arguments: 0 - 2<br />
  default: <code>http websocket</code><br />
  context: server, location, if<br />
  legacy name: push_publisher  </p>
<blockquote>
<p>Defines a server or location as a publisher endpoint. Requests to a publisher location are treated as messages to be sent to subscribers. See the protocol documentation for a detailed description.  <br />
<a href="#publisher-endpoints">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_publisher_channel_id</strong><br />
  arguments: 1 - 7<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Channel id for publisher location.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_publisher_upstream_request</strong> <code>&lt;url&gt;</code><br />
  arguments: 1<br />
  context: server, location, if  </p>
<blockquote>
<p>Send POST request to internal location (which may proxy to an upstream server) with published message in the request body. Useful for bridging websocket publishers with <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> applications, or for transforming message via upstream application before publishing to a channel.  <br />
The upstream response code determines how publishing will proceed. A <code>200 OK</code> will publish the message from the upstream response's body. A <code>304 Not Modified</code> will publish the message as it was received from the publisher. A <code>204 No Content</code> will result in the message not being published.  <br />
<a href="#message-forwarding">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_pubsub</strong> <code>[ http | websocket | eventsource | longpoll | intervalpoll | chunked | multipart-mixed | http-raw-stream ]</code><br />
  arguments: 0 - 6<br />
  default: <code>http websocket eventsource longpoll chunked multipart-mixed</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Defines a server or location as a pubsub endpoint. For long-polling, GETs subscribe. and POSTs publish. For Websockets, publishing data on a connection does not yield a channel metadata response. Without additional configuration, this turns a location into an echo server.  <br />
<a href="#pubsub-endpoint">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscribe_request</strong> <code>&lt;url&gt;</code><br />
  arguments: 1<br />
  context: server, location, if  </p>
<blockquote>
<p>Send GET request to internal location (which may proxy to an upstream server) after subscribing. Disabled for longpoll and interval-polling subscribers.  <br />
<a href="#subscriber-presence">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber</strong> <code>[ websocket | eventsource | longpoll | intervalpoll | chunked | multipart-mixed | http-raw-stream ]</code><br />
  arguments: 0 - 5<br />
  default: <code>websocket eventsource longpoll chunked multipart-mixed</code><br />
  context: server, location, if<br />
  legacy name: push_subscriber  </p>
<blockquote>
<p>Defines a server or location as a channel subscriber endpoint. This location represents a subscriber's interface to a channel's message queue. The queue is traversed automatically, starting at the position defined by the <code>nchan_subscriber_first_message</code> setting.  <br />
 The value is a list of permitted subscriber types.  <br />
<a href="#subscriber-endpoints">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_channel_id</strong><br />
  arguments: 1 - 7<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Channel id for subscriber location. Can have up to 4 values to subscribe to up to 4 channels.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_compound_etag_message_id</strong><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Override the default behavior of using both <code>Last-Modified</code> and <code>Etag</code> headers for the message id.  <br />
Enabling this option packs the entire message id into the <code>Etag</code> header, and discards<br />
<code>Last-Modified</code> and <code>If-Modified-Since</code> headers.  <br />
<a href="">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_first_message</strong> <code>[ oldest | newest | &lt;number&gt; ]</code><br />
  arguments: 1<br />
  default: <code>oldest</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Controls the first message received by a new subscriber. 'oldest' starts at the oldest available message in a channel's message queue, 'newest' waits until a message arrives. If a number <code>n</code> is specified, starts at <code>n</code>th message from the oldest. (<code>-n</code> starts at <code>n</code>th from now). 0 is equivalent to 'newest'.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_http_raw_stream_separator</strong> <code>&lt;string&gt;</code><br />
  arguments: 1<br />
  default: <code>\n</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Message separator string for the http-raw-stream subscriber. Automatically terminated with a newline character if not explicitly set to an empty string.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_info</strong><br />
  arguments: 0<br />
  context: location  </p>
<blockquote>
<p>A subscriber location for debugging the state of subscribers on a given channel. The subscribers of the channel specified by <code>nchan_channel_id</code> evaluate <code>nchan_subscriber_info_string</code> and send it back to the requested on this location. This is useful to see where subscribers are in an Nchan cluster, as well as debugging subscriber connection issues.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_info_string</strong><br />
  arguments: 1<br />
  default: <code>$nchan_subscriber_type $remote_addr:$remote_port $http_user_agent $server_name $request_uri $pid</code><br />
  context: server, location  </p>
<blockquote>
<p>this string is evaluated by each subscriber on a given channel and sent to the requester of a <code>nchan_subscriber_info</code> location    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_last_message_id</strong><br />
  arguments: 1 - 5<br />
  default: <code>$http_last_event_id $arg_last_event_id</code><br />
  context: server, location, if  </p>
<blockquote>
<p>If <code>If-Modified-Since</code> and <code>If-None-Match</code> headers are absent, set the message id to the first non-empty of these values. Used primarily as a workaround for the inability to set the first <code>Last-Message-Id</code> of a web browser's EventSource object.     </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_message_id_custom_etag_header</strong><br />
  arguments: 1<br />
  default: <code>(none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Use a custom header instead of the Etag header for message ID in subscriber responses. This setting is a hack, useful when behind a caching proxy such as Cloudflare that under some conditions (like using gzip encoding) swallow the Etag header.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscriber_timeout</strong> <code>&lt;number&gt; (seconds)</code><br />
  arguments: 1<br />
  default: <code>0 (none)</code><br />
  context: http, server, location, if<br />
  legacy name: push_subscriber_timeout  </p>
<blockquote>
<p>Maximum time a subscriber may wait for a message before being disconnected. If you don't want a subscriber's connection to timeout, set this to 0. When possible, the subscriber will get a response with a <code>408 Request Timeout</code> status; otherwise the subscriber will simply be disconnected.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_unsubscribe_request</strong> <code>&lt;url&gt;</code><br />
  arguments: 1<br />
  context: server, location, if  </p>
<blockquote>
<p>Send GET request to internal location (which may proxy to an upstream server) after unsubscribing. Disabled for longpoll and interval-polling subscribers.  <br />
<a href="#subscriber-presence">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_websocket_client_heartbeat</strong> <code>&lt;heartbeat_in&gt; &lt;heartbeat_out&gt;</code><br />
  arguments: 2<br />
  default: <code>none (disabled)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Most browser Websocket clients do not allow manually sending PINGs to the server. To overcome this limitation, this setting can be used to set up a PING/PONG message/response connection heartbeat. When the client sends the server message <em>heartbeat_in</em> (PING), the server automatically responds with <em>heartbeat_out</em> (PONG).    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_websocket_ping_interval</strong> <code>&lt;number&gt; (seconds)</code><br />
  arguments: 1<br />
  default: <code>0 (none)</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Interval for sending websocket ping frames. Disabled by default.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_access_control_allow_credentials</strong><br />
  arguments: 1<br />
  default: <code>on</code><br />
  context: http, server, location, if  </p>
<blockquote>
<p>When enabled, sets the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">Cross-Origin Resource Sharing (CORS)</a> <code>Access-Control-Allow-Credentials</code> header to <code>true</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_access_control_allow_origin</strong> <code>&lt;string&gt;</code><br />
  arguments: 1<br />
  default: <code>$http_origin</code><br />
  context: http, server, location, if  </p>
<blockquote>
<p>Set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">Cross-Origin Resource Sharing (CORS)</a> <code>Access-Control-Allow-Origin</code> header to this value. If the incoming request's <code>Origin</code> header does not match this value, respond with a <code>403 Forbidden</code>. Multiple origins can be provided in a single argument separated with a space.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_authorize_request</strong> <code>&lt;url&gt;</code><br />
  arguments: 1<br />
  context: server, location, if  </p>
<blockquote>
<p>Send GET request to internal location (which may proxy to an upstream server) for authorization of a publisher or subscriber request. A 200 response authorizes the request, a 403 response forbids it.  <br />
<a href="#request-authorization">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_group</strong> <code>&lt;string&gt;</code><br />
  arguments: 1<br />
  default: <code>(none)</code><br />
  context: server, location, if<br />
  legacy name: push_channel_group  </p>
<blockquote>
<p>The accounting and security group a channel belongs to. Works like a prefix string to the channel id. Can be set with nginx variables.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_group_accounting</strong><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: server, location  </p>
<blockquote>
<p>Enable tracking channel, subscriber, and message information on a per-channel-group basis. Can be used to place upper limits on channel groups.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_location</strong> <code>[ get | set | delete | off ]</code><br />
  arguments: 0 - 3<br />
  default: <code>get set delete</code><br />
  context: location  </p>
<blockquote>
<p>Group information and configuration location. GET request for group info, POST to set limits, DELETE to delete all channels in group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_max_channels</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: location  </p>
<blockquote>
<p>Maximum number of channels allowed in the group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_max_messages</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: location  </p>
<blockquote>
<p>Maximum number of messages allowed for all the channels in the group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_max_messages_disk</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: location  </p>
<blockquote>
<p>Maximum amount of disk space allowed for the messages of all the channels in the group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_max_messages_memory</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: location  </p>
<blockquote>
<p>Maximum amount of shared memory allowed for the messages of all the channels in the group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_group_max_subscribers</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: location  </p>
<blockquote>
<p>Maximum number of subscribers allowed for the messages of all the channels in the group.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_max_channel_id_length</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>1024</code><br />
  context: http, server, location<br />
  legacy name: push_max_channel_id_length  </p>
<blockquote>
<p>Maximum permissible channel id length (number of characters). This settings applies to ids before they may be split by the <code>nchan_channel_id_split_delimiter</code> Requests with a channel id that is too long will receive a <code>403 Forbidden</code> response.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_max_channel_subscribers</strong> <code>&lt;number&gt;</code><br />
  arguments: 1<br />
  default: <code>0 (unlimited)</code><br />
  context: http, server, location<br />
  legacy name: push_max_channel_subscribers  </p>
<blockquote>
<p>Maximum concurrent subscribers to the channel on this Nchan server. Does not include subscribers on other Nchan instances when using a shared Redis server.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_subscribe_existing_channels_only</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: http, server, location<br />
  legacy name: push_authorized_channels_only  </p>
<blockquote>
<p>Whether or not a subscriber may create a channel by sending a request to a subscriber location. If set to on, a publisher must send a POST or PUT request before a subscriber can request messages on the channel. Otherwise, all subscriber requests to nonexistent channels will get a 403 Forbidden response.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_message_buffer_length</strong> <code>[ &lt;number&gt; | &lt;variable&gt; ]</code><br />
  arguments: 1<br />
  default: <code>10</code><br />
  context: http, server, location<br />
  legacy names: push_max_message_buffer_length, push_message_buffer_length  </p>
<blockquote>
<p>Publisher configuration setting the maximum number of messages to store per channel. A channel's message buffer will retain a maximum of this many most recent messages. An Nginx variable can also be used to set the buffer length dynamically.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_message_temp_path</strong> <code>&lt;path&gt;</code><br />
  arguments: 1<br />
  default: <code>&lt;client_body_temp_path&gt;</code><br />
  context: http  </p>
<blockquote>
<p>Large messages are stored in temporary files in the <code>client_body_temp_path</code> or the <code>nchan_message_temp_path</code> if the former is unavailable. Default is the built-in default <code>client_body_temp_path</code>    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_message_timeout</strong> <code>[ &lt;time&gt; | &lt;variable&gt; ]</code><br />
  arguments: 1<br />
  default: <code>1h</code><br />
  context: http, server, location<br />
  legacy name: push_message_timeout  </p>
<blockquote>
<p>Publisher configuration setting the length of time a message may be queued before it is considered expired. If you do not want messages to expire, set this to 0. Note that messages always expire from oldest to newest, so an older message may prevent a newer one with a shorter timeout from expiring. An Nginx variable can also be used to set the timeout dynamically.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_accurate_subscriber_count</strong><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: upstream  </p>
<blockquote>
<p>When disabled, use fast but potentially inaccurate subscriber counts. These may become inaccurate if Nginx workers exit uncleanly or are terminated. When enabled, use a slightly slower but completely accurate subscriber count. Defaults to 'off' for legacy reasons, but will be enabled by default in the future.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_check_interval_backoff</strong> <code>&lt;floating point&gt; &gt;= 0, ratio of current delay</code><br />
  arguments: 1<br />
  default: <code>2 (increase delay by 200% each try)</code><br />
  context: upstream  </p>
<blockquote>
<p>Add an exponentially increasing delay to the Redis cluster check interval. <code>Delay[n] = (Delay[n-1] + jitter) * (nchan_redis_cluster_check_interval_backoff + 1)</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_check_interval_jitter</strong> <code>&lt;floating point&gt; &gt;= 0, (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>0.2 (20% of interval value)</code><br />
  context: upstream  </p>
<blockquote>
<p>Introduce random jitter to Redis cluster check interval, where the range is <code>(cluster_check_interval * nchan_redis_cluster_check_interval_jitter) / 2</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_check_interval_max</strong> <code>&lt;time&gt; (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>30s</code><br />
  context: upstream  </p>
<blockquote>
<p>Maximum Redis cluster check interval after backoff and jitter.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_check_interval_min</strong> <code>&lt;time&gt;</code><br />
  arguments: 1<br />
  default: <code>1s (0 to disable)</code><br />
  context: upstream  </p>
<blockquote>
<p>When connected to a cluster, periodically check the cluster state and layout via a random master node.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_connect_timeout</strong><br />
  arguments: 1<br />
  default: <code>15s</code><br />
  context: upstream  </p>
<blockquote>
<p>Redis cluster connection timeout.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_max_failing_time</strong><br />
  arguments: 1<br />
  default: <code>30s</code><br />
  context: upstream  </p>
<blockquote>
<p>Maximum time a Redis cluster can be in a failing state before Nchan disconnects from it. During this time, Nchan will try to recover from a cluster or node failure without disconnecting the entire cluster.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_recovery_delay</strong> <code>&lt;time&gt;</code><br />
  arguments: 1<br />
  default: <code>100ms</code><br />
  context: upstream  </p>
<blockquote>
<p>After a cluster recovery failure, wait this long to try again.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_recovery_delay_backoff</strong> <code>&lt;floating point&gt; &gt;= 0, ratio of current delay</code><br />
  arguments: 1<br />
  default: <code>0.5 (increase delay by 50% each try)</code><br />
  context: upstream  </p>
<blockquote>
<p>Add an exponentially increasing delay to Redis cluster recovery retries. <code>Delay[n] = (Delay[n-1] + jitter) * (nchan_redis_cluster_recovery_delay_backoff + 1)</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_recovery_delay_jitter</strong> <code>&lt;floating point&gt; &gt;= 0, (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>0.5 (50% of delay value)</code><br />
  context: upstream  </p>
<blockquote>
<p>Introduce random jitter to Redis cluster recovery retry time, where the range is <code>(recovery_delay * nchan_redis_cluster_recovery_delay_jitter) / 2</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_cluster_recovery_delay_max</strong> <code>&lt;time&gt; (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>2s</code><br />
  context: upstream  </p>
<blockquote>
<p>Maximum Redis cluster recovery delay after backoff and jitter.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_command_timeout</strong> <code>&lt;time&gt; (0 to leave unlimited)</code><br />
  arguments: 1<br />
  default: <code>5s</code><br />
  context: upstream  </p>
<blockquote>
<p>If a Redis server exceeds this time to produce a command reply, it is considered unhealthy and is disconnected.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_connect_timeout</strong><br />
  arguments: 1<br />
  default: <code>10s</code><br />
  context: upstream  </p>
<blockquote>
<p>Redis server connection timeout.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_discovered_ip_range_blacklist</strong> <code>&lt;CIDR range&gt;</code><br />
  arguments: 1 - 7<br />
  context: upstream  </p>
<blockquote>
<p>do not attempt to connect to <strong>autodiscovered</strong> nodes with IPs in the specified ranges. Useful for blacklisting private network ranges for clusters and Redis slaves. NOTE that this blacklist applies only to autodiscovered nodes, and not ones specified in the upstream block    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_idle_channel_cache_timeout</strong> <code>&lt;time&gt;</code><br />
  arguments: 1<br />
  default: <code>30s</code><br />
  context: http, server, location  </p>
<blockquote>
<p>A Redis-stored channel and its messages are removed from memory (local cache) after this timeout, provided there are no local subscribers.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_namespace</strong> <code>&lt;string&gt;</code><br />
  arguments: 1<br />
  context: http, server, upstream, location  </p>
<blockquote>
<p>Prefix all Redis keys with this string. All Nchan-related keys in redis will be of the form "nchan_redis_namespace:*" . Default is empty.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_nostore_fastpublish</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: http, server, upstream  </p>
<blockquote>
<p>Increases publishing capacity by 2-3x for Redis nostore mode at the expense of inaccurate subscriber counts in the publisher response.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_optimize_target</strong> <code>[ cpu | bandwidth ]</code><br />
  arguments: 1<br />
  default: <code>bandwidth</code><br />
  context: upstream  </p>
<blockquote>
<p>This tweaks whether <a href="https://redis.io/commands/eval#replicating-commands-instead-of-scripts">effect replication</a> is enabled. This setting is obsolete, as effect replication is now always enabled to support other features    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_pass</strong> <code>&lt;upstream-name&gt;</code><br />
  arguments: 1<br />
  context: http, server, location  </p>
<blockquote>
<p>Use an upstream config block for Redis servers.  <br />
<a href="#connecting-to-a-redis-server">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_password</strong><br />
  arguments: 1<br />
  default: <code>&lt;none&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Set Redis password for AUTH command. All servers in the upstream block will use this password <em>unless</em> a different password is specified by a server URL.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ping_interval</strong><br />
  arguments: 1<br />
  default: <code>4m</code><br />
  context: http, server, upstream, location  </p>
<blockquote>
<p>Send a keepalive command to redis to keep the Nchan redis clients from disconnecting. Set to 0 to disable.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_reconnect_delay</strong> <code>&lt;time&gt;</code><br />
  arguments: 1<br />
  default: <code>500ms</code><br />
  context: upstream  </p>
<blockquote>
<p>After a connection failure, wait this long before trying to reconnect to Redis.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_reconnect_delay_backoff</strong> <code>&lt;floating point&gt; &gt;= 0 (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>0.5 (increase delay by 50% each try)</code><br />
  context: upstream  </p>
<blockquote>
<p>Add an exponentially increasing delay to Redis connection retries. <code>Delay[n] = (Delay[n-1] + jitter) * (nchan_redis_reconnect_delay_backoff + 1)</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_reconnect_delay_jitter</strong> <code>&lt;floating point&gt; &gt;= 0 (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>0.1 (10% of delay value)</code><br />
  context: upstream  </p>
<blockquote>
<p>Introduce random jitter to Redis reconnection time, where the range is <code>(reconnect_delay * nchan_redis_reconnect_delay_jitter) / 2</code>.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_reconnect_delay_max</strong> <code>&lt;time&gt; (0 to disable)</code><br />
  arguments: 1<br />
  default: <code>10s</code><br />
  context: upstream  </p>
<blockquote>
<p>Maximum Redis reconnection delay after backoff and jitter.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_retry_commands</strong><br />
  arguments: 1<br />
  default: <code>on</code><br />
  context: upstream  </p>
<blockquote>
<p>Allow Nchan to retry some Redis commands on keyslot errors and cluster unavailability. Queuing up a lot of commands while the cluster is unavailable may lead to excessive memory use, but it can also defer commands during transient failures.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_retry_commands_max_wait</strong> <code>&lt;time&gt; (0 to leave unlimited)</code><br />
  arguments: 1<br />
  default: <code>500ms</code><br />
  context: upstream  </p>
<blockquote>
<p>When <code>nchan_redis_retry_commands</code> is on, the maximum time a command will stayed queued to be retried.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_server</strong> <code>&lt;redis-url&gt; &lt;optional-forced-role&gt;</code><br />
  arguments: 1 - 2<br />
  default: <code>&lt;redis-url&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Used in upstream { } blocks to set redis servers. Redis url is in the form 'redis://:password@hostname:6379/0'. Shorthands 'host:port' or 'host' are permitted. A role may optionally be provided as well to force a server to be treated as 'master' or 'slave'.<br />
      uri:     </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: upstream  </p>
<blockquote>
<p>Enables SSL/TLS for all connections to Redis servers in this upstream block. When enabled, no unsecured connections are permitted    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_ciphers</strong><br />
  arguments: 1<br />
  default: <code>&lt;system default&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Acceptable ciphers when using TLS for Redis connections    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_client_certificate</strong><br />
  arguments: 1<br />
  context: upstream  </p>
<blockquote>
<p>Path to client certificate when using TLS for Redis connections    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_client_certificate_key</strong><br />
  arguments: 1<br />
  context: upstream  </p>
<blockquote>
<p>Path to client certificate key when using TLS for Redis connections    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_server_name</strong><br />
  arguments: 1<br />
  context: upstream  </p>
<blockquote>
<p>Server name to verify (CN) when using TLS for Redis connections    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_trusted_certificate</strong><br />
  arguments: 1<br />
  context: upstream  </p>
<blockquote>
<p>Trusted certificate (CA) when using TLS for Redis connections    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_trusted_certificate_path</strong><br />
  arguments: 1<br />
  default: <code>&lt;system default&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Trusted certificate (CA) when using TLS for Redis connections. Defaults to the system's SSL cert path unless nchan_redis_ssl_trusted_certificate is set    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_ssl_verify_certificate</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>on</code><br />
  context: upstream  </p>
<blockquote>
<p>Should the server certificate be verified when using TLS for Redis connections? Useful to disable when testing with a self-signed server certificate.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_storage_mode</strong> <code>[ distributed | backup | nostore ]</code><br />
  arguments: 1<br />
  default: <code>distributed</code><br />
  context: http, server, upstream, location  </p>
<blockquote>
<p>The mode of operation of the Redis server. In <code>distributed</code> mode, messages are published directly to Redis, and retrieved in real-time. Any number of Nchan servers in distributed mode can share the Redis server (or cluster). Useful for horizontal scalability, but suffers the latency penalty of all message publishing going through Redis first.  </p>
<p>In <code>backup</code> mode, messages are published locally first, then later forwarded to Redis, and are retrieved only upon channel initialization. Only one Nchan server should use a Redis server (or cluster) in this mode. Useful for data persistence without sacrificing response times to the latency of a round-trip to Redis.  </p>
<p>In <code>nostore</code> mode, messages are published as in <code>distributed</code> mode, but are not stored. Thus Redis is used to broadcast messages to many Nchan instances with no delivery guarantees during connection failure, and only local in-memory storage. This means that there are also no message delivery guarantees for subscribers switching from one Nchan instance to another connected to the same Redis server or cluster. Nostore mode increases Redis publishing capacity by an order of magnitude.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_subscribe_weights</strong> <code>master=&lt;integer&gt; slave=&lt;integer&gt;</code><br />
  arguments: 1 - 2<br />
  default: <code>master=1 slave=1</code><br />
  context: upstream  </p>
<blockquote>
<p>Determines how subscriptions to Redis PUBSUB channels are distributed between master and slave nodes. The higher the number, the more likely that each node of that type will be chosen for each new channel. The weights for slave nodes are cumulative, so an equal 1:1 master:slave weight ratio with two slaves would have a 1/3 chance of picking a master, and 2/3 chance of picking one of the slaves. The weight must be a non-negative integer.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_upstream_stats</strong> <code>&lt;upstream_name&gt;</code><br />
  arguments: 1<br />
  default: <code>(none)</code><br />
  context: server, location  </p>
<blockquote>
<p>Defines a location as redis statistics endpoint. GET requests to this location produce a JSON response with detailed listings of total Redis command times and number of calls, broken down by node and command type. Useful for making graphs about Redis performance. Can be set with nginx variables.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_upstream_stats_disconnected_timeout</strong><br />
  arguments: 1<br />
  default: <code>5m</code><br />
  context: upstream  </p>
<blockquote>
<p>Keep stats for disconnected nodes around for this long. Useful for tracking stats for nodes that have intermittent connectivity issues.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_upstream_stats_enabled</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>&lt;on&gt; if at least 1 redis stats location is configured, otherwise &lt;off&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Gather Redis node command timings for this upstream    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_url</strong> <code>&lt;redis-url&gt;</code><br />
  arguments: 1<br />
  default: <code>127.0.0.1:6379</code><br />
  context: http, server, location  </p>
<blockquote>
<p>Use of this command is discouraged in favor of upstreams blocks with <a href="#nchan_redis_server"><code>nchan_redis_server</code></a>. The path to a redis server, of the form 'redis://:password@hostname:6379/0'. Shorthand of the form 'host:port' or just 'host' is also accepted.  <br />
<a href="#connecting-to-a-redis-server">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_redis_username</strong><br />
  arguments: 1<br />
  default: <code>&lt;none&gt;</code><br />
  context: upstream  </p>
<blockquote>
<p>Set Redis username for AUTH command (available when using ACLs on the Redis server). All servers in the upstream block will use this username <em>unless</em> a different username is specified by a server URL.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_shared_memory_size</strong> <code>&lt;size&gt;</code><br />
  arguments: 1<br />
  default: <code>128M</code><br />
  context: http<br />
  legacy names: push_max_reserved_memory, nchan_max_reserved_memory  </p>
<blockquote>
<p>Shared memory slab pre-allocated for Nchan. Used for channel statistics, message storage, and interprocess communication.  <br />
<a href="#memory-storage">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_store_messages</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>on</code><br />
  context: http, server, location, if<br />
  legacy name: push_store_messages  </p>
<blockquote>
<p>Publisher configuration. "<code>off</code>" is equivalent to setting <code>nchan_message_buffer_length 0</code>, which disables the buffering of old messages. Using this setting is not recommended when publishing very quickly, as it may result in missed messages.    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_use_redis</strong> <code>[ on | off ]</code><br />
  arguments: 1<br />
  default: <code>off</code><br />
  context: http, server, location  </p>
<blockquote>
<p>Use of this command is discouraged in favor of (<code>nchan_redis_pass</code>)[#nchan_redis_pass]. Use Redis for message storage at this location.  <br />
<a href="#connecting-to-a-redis-server">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_event_string</strong> <code>&lt;string&gt;</code><br />
  arguments: 1<br />
  default: <code>"$nchan_channel_event $nchan_channel_id"</code><br />
  context: server, location, if  </p>
<blockquote>
<p>Contents of channel event message    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_events_channel_id</strong><br />
  arguments: 1<br />
  context: server, location, if  </p>
<blockquote>
<p>Channel id where <code>nchan_channel_id</code>'s events should be sent. Events like subscriber enqueue/dequeue, publishing messages, etc. Useful for application debugging. The channel event message is configurable via nchan_channel_event_string. The channel group for events is hardcoded to 'meta'.  <br />
<a href="#channel-events">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_stub_status</strong><br />
  arguments: 0<br />
  context: location  </p>
<blockquote>
<p>Similar to Nginx's stub_status directive, requests to an <code>nchan_stub_status</code> location get a response with some vital Nchan statistics. This data does not account for information from other Nchan instances, and monitors only local connections, published messages, etc.  <br />
<a href="#nchan_stub_status">more details</a>  </p>
</blockquote>
</li>
<li>
<p><strong>nchan_channel_timeout</strong><br />
  arguments: 1<br />
  context: http, server, location<br />
  legacy name: push_channel_timeout  </p>
<blockquote>
<p>Amount of time an empty channel hangs around. Don't mess with this setting unless you know what you are doing!    </p>
</blockquote>
</li>
<li>
<p><strong>nchan_storage_engine</strong> <code>[ memory | redis ]</code><br />
  arguments: 1<br />
  default: <code>memory</code><br />
  context: http, server, location  </p>
<blockquote>
<p>Development directive to completely replace default storage engine. Don't use unless you are an Nchan developer.    </p>
</blockquote>
</li>
</ul>
<h2 id="contribute">Contribute</h2>
<p>Please support this project with a donation to keep me warm through the winter. I accept bitcoin at 15dLBzRS4HLRwCCVjx4emYkxXcyAPmGxM3 . Other donation methods can be found at <a href="https://nchan.io">https://nchan.io</a></p>
<h2 id="github">GitHub</h2>
<p>You may find additional configuration tips and documentation for this module in the <a href="https://github.com/slact/nchan" target="_blank">GitHub 
repository for 
nginx-module-nchan</a>.</p>







  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2023 GetPageSpeed LLC 2023
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/GetPageSpeed" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/GetPageSpeed" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/getpagespeed" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/getpagespeed/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/GetPageSpeed" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.top", "navigation.tabs", "search.suggest", "content.tooltips", "content.tabs.link", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>